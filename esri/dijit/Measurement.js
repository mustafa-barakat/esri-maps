// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/debounce":function(){define([],function(){return function(G,A){var z;return function(){z&&clearTimeout(z);var v=this,p=arguments;z=setTimeout(function(){G.apply(v,p)},A)}}})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(G,A,z,v,p,w,u,n,d,h,e,x,m){function C(){}
function E(a){return function(c,f,g,l){return c&&"string"==typeof f&&c[f]==C?c.on(f.substring(2).toLowerCase(),u.hitch(g,l)):a.apply(z,arguments)}}G.around(z,"connect",E);w.connect&&G.around(w,"connect",E);G=v("dijit._Widget",[e,x,m],{onClick:C,onDblClick:C,onKeyDown:C,onKeyPress:C,onKeyUp:C,onMouseDown:C,onMouseMove:C,onMouseOut:C,onMouseOver:C,onMouseLeave:C,onMouseEnter:C,onMouseUp:C,constructor:function(a){this._toConnect={};for(var c in a)this[c]===C&&(this._toConnect[c.replace(/^on/,"").toLowerCase()]=
a[c],delete a[c])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,c){return this[this._onMap(a)]===C?z.connect(this.domNode,a.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){w.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,c)},attr:function(a,
c){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){w.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?n("[widgetId]",this.containerNode).map(h.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});p("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});return G})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(G,A,z,v,p,w,u,n,d,h,e,x,m,C,E,a,c,f,g,l,r,q,k){function B(t){return function(D){n[D?"set":"remove"](this.domNode,t,D);this._set(t,D)}}m.add("dijit-legacy-requires",!C.isAsync);m.add("dojo-bidi",!1);m("dijit-legacy-requires")&&c(0,function(){G(["dijit/_base/manager"])});var I={};v=w("dijit._WidgetBase",[f,r],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:B("lang"),dir:"",_setDirAttr:B("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(t){this._set("ownerDocument",t)},attributeMap:{},_blankGif:v.blankGif||G.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var t=this.constructor;if(!t._setterAttrs){var D=t.prototype,H=t._setterAttrs=[];t=t._onMap={};for(var J in D.attributeMap)H.push(J);for(J in D)/^on/.test(J)&&(t[J.substring(2).toLowerCase()]=J),/^_set[A-Z](.*)Attr$/.test(J)&&(J=J.charAt(4).toLowerCase()+
J.substr(5,J.length-9),D.attributeMap&&J in D.attributeMap||H.push(J))}},postscript:function(t,D){this.create(t,D)},create:function(t,D){this._introspect();this.srcNodeRef=u.byId(D);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);t&&(this.params=t,E.mixin(this,t));this.postMixInProperties();this.id||(this.id=k.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=l.body(this.ownerDocument);k.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();if((t=this.srcNodeRef)&&t.parentNode&&this.domNode!==t){t.parentNode.replaceChild(this.domNode,t);var H=!0}this.domNode.setAttribute("widgetId",this.id)}this.postCreate();H&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var t={},D;for(D in this.params||{})t[D]=this._get(D);A.forEach(this.constructor._setterAttrs,
function(H){if(!(H in t)){var J=this._get(H);J&&this.set(H,J)}},this);for(D in t)this.set(D,t[D])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var t=this.baseClass.split(" ");this.isLeftToRight()||(t=t.concat(A.map(t,function(D){return D+"Rtl"})));d.add(this.domNode,t)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,A.forEach(this.getChildren(),function(t){t._started||
t._destroyed||!E.isFunction(t.startup)||(t.startup(),t._started=!0)}))},destroyRecursive:function(t){this._beingDestroyed=!0;this.destroyDescendants(t);this.destroy(t)},destroy:function(t){function D(H){H.destroyRecursive?H.destroyRecursive(t):H.destroy&&H.destroy(t)}this._beingDestroyed=!0;this.uninitialize();A.forEach(this._connects,E.hitch(this,"disconnect"));A.forEach(this._supportingWidgets,D);this.domNode&&A.forEach(k.findWidgets(this.domNode,this.containerNode),D);this.destroyRendering(t);
k.remove(this.id);this._destroyed=!0},destroyRendering:function(t){this.bgIframe&&(this.bgIframe.destroy(t),delete this.bgIframe);this.domNode&&(t?n.remove(this.domNode,"widgetId"):h.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(t||h.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(t){A.forEach(this.getChildren(),function(D){D.destroyRecursive&&D.destroyRecursive(t)})},uninitialize:function(){return!1},_setStyleAttr:function(t){var D=this.domNode;E.isObject(t)?
x.set(D,t):D.style.cssText=D.style.cssText?D.style.cssText+("; "+t):t;this._set("style",t)},_attrToDom:function(t,D,H){H=3<=arguments.length?H:this.attributeMap[t];A.forEach(E.isArray(H)?H:[H],function(J){var K=this[J.node||J||"domNode"];switch(J.type||"attribute"){case "attribute":E.isFunction(D)&&(D=E.hitch(this,D));J=J.attribute?J.attribute:/^on[A-Z][a-zA-Z]*$/.test(t)?t.toLowerCase():t;K.tagName?n.set(K,J,D):K.set(J,D);break;case "innerText":K.innerHTML="";K.appendChild(this.ownerDocument.createTextNode(D));
break;case "textContent":K.textContent=D;break;case "innerHTML":K.innerHTML=D;break;case "class":d.replace(K,D,this[t]);break;case "toggleClass":d.toggle(K,J.className||t,D)}},this)},get:function(t){var D=this._getAttrNames(t);return this[D.g]?this[D.g]():this._get(t)},set:function(t,D){if("object"===typeof t){for(var H in t)this.set(H,t[H]);return this}H=this._getAttrNames(t);var J=this[H.s];if(E.isFunction(J))var K=J.apply(this,Array.prototype.slice.call(arguments,1));else{J=this.focusNode&&!E.isFunction(this.focusNode)?
"focusNode":"domNode";var Q=this[J]&&this[J].tagName,N;if((N=Q)&&!(N=I[Q])){N=this[J];var O={};for(M in N)O[M.toLowerCase()]=!0;N=I[Q]=O}var M=N;H=t in this.attributeMap?this.attributeMap[t]:H.s in this?this[H.s]:M&&H.l in M&&"function"!=typeof D||/^aria-|^data-|^role$/.test(t)?J:null;null!=H&&this._attrToDom(t,D,H);this._set(t,D)}return K||this},_attrPairNames:{},_getAttrNames:function(t){var D=this._attrPairNames;if(D[t])return D[t];var H=t.replace(/^[a-z]|-[a-zA-Z]/g,function(J){return J.charAt(J.length-
1).toUpperCase()});return D[t]={n:t+"Node",s:"_set"+H+"Attr",g:"_get"+H+"Attr",l:H.toLowerCase()}},_set:function(t,D){var H=this[t];this[t]=D;!this._created||H===D||H!==H&&D!==D||(this._watchCallbacks&&this._watchCallbacks(t,H,D),this.emit("attrmodified-"+t,{detail:{prevValue:H,newValue:D}}))},_get:function(t){return this[t]},emit:function(t,D,H){D=D||{};void 0===D.bubbles&&(D.bubbles=!0);void 0===D.cancelable&&(D.cancelable=!0);D.detail||(D.detail={});D.detail.widget=this;var J,K=this["on"+t];K&&
(J=K.apply(this,H?H:[D]));this._started&&!this._beingDestroyed&&a.emit(this.domNode,t.toLowerCase(),D);return J},on:function(t,D){var H=this._onMap(t);return H?z.after(this,H,D,!0):this.own(a(this.domNode,t,D))[0]},_onMap:function(t){var D=this.constructor,H=D._onMap;if(!H){H=D._onMap={};for(var J in D.prototype)/^on/.test(J)&&(H[J.replace(/^on/,"").toLowerCase()]=J)}return H["string"==typeof t&&t.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?k.findWidgets(this.containerNode):[]},getParent:function(){return k.getEnclosingWidget(this.domNode.parentNode)},connect:function(t,D,H){return this.own(p.connect(t,D,this,H))[0]},disconnect:function(t){t.remove()},subscribe:function(t,D){return this.own(g.subscribe(t,E.hitch(this,D)))[0]},unsubscribe:function(t){t.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():e.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=x.get(this.domNode,"display")},placeAt:function(t,D){var H=!t.tagName&&k.byId(t);!H||!H.addChild||D&&"number"!==typeof D?(t=H&&"domNode"in H?H.containerNode&&!/after|before|replace/.test(D||"")?H.containerNode:H.domNode:u.byId(t,this.ownerDocument),h.place(this.domNode,t,D),!this._started&&(this.getParent()||{})._started&&this.startup()):H.addChild(this,D);return this},defer:function(t,D){var H=setTimeout(E.hitch(this,function(){H&&(H=null,this._destroyed||E.hitch(this,t)())}),D||0);return{remove:function(){H&&
(clearTimeout(H),H=null);return null}}}});m("dojo-bidi")&&v.extend(q);return v})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(G,A,z){return z("dijit.Destroyable",null,{destroy:function(v){this._destroyed=!0},own:function(){var v=["destroyRecursive","destroy","remove"];G.forEach(arguments,function(p){function w(){u.remove();G.forEach(n,function(h){h.remove()})}var u=A.before(this,"destroy",function(h){p[d](h)}),n=[];if(p.then){var d="cancel";
p.then(w,w)}else G.forEach(v,function(h){"function"===typeof p[h]&&(d||(d=h),n.push(A.after(p,h,w,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(G,A,z,v,p,w){G=v("dijit._OnDijitClickMixin",null,{connect:function(u,n,d){return this.inherited(arguments,[u,"ondijitclick"==n?w:n,d])}});G.a11yclick=w;return G})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase",
"dojo/_base/declare","dojo/_base/lang"],function(G,A,z,v){v.extend(A,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return z("dijit._FocusMixin",null,{_focusManager:G})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(G,A,z,v){z(function(){A("highcontrast")&&G.add(v.body(),"dijit_a11y")});return A})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(G,A,z,v,p,w,u){p.add("highcontrast",function(){var n=u.doc.createElement("div");try{n.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(A.blankGif||G.toUrl("./resources/blank.gif"))+'");';u.body().appendChild(n);var d=v.getComputedStyle(n),h=d.backgroundImage;return d.borderTopColor==d.borderRightColor||h&&("none"==h||"url(invalid-url:)"==h)}catch(e){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
e.toString()),!1}finally{8>=p("ie")?n.outerHTML="":u.body().removeChild(n)}});w(function(){p("highcontrast")&&z.add(u.body(),"dj_a11y")});return p})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(G,A,z,v,p,w,u,n,d,h,e,x,m,C,E,a){e("dijit-legacy-requires")&&a(0,function(){G(["dijit/MenuItem",
"dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return z("dijit.Menu",E,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):A.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(c){return m.get(this._iframeContentDocument(c))||this._iframeContentDocument(c).__parent__||
c.name&&document.frames[c.name]||null},_iframeContentDocument:function(c){return c.contentDocument||c.contentWindow&&c.contentWindow.document||c.name&&document.frames[c.name]&&document.frames[c.name].document||null},bindDomNode:function(c){c=v.byId(c,this.ownerDocument);if("iframe"==c.tagName.toLowerCase()){var f=c;var g=this._iframeContentWindow(f);g=x.body(g.document)}else g=c==x.body(this.ownerDocument)?this.ownerDocument.documentElement:c;var l={node:c,iframe:f};p.set(c,"_dijitMenu"+this.id,this._bindings.push(l));
var r=d.hitch(this,function(q){var k=this.selector,B=k?function(t){return h.selector(k,t)}:function(t){return t},I=this;return[h(q,B(this.leftClickToOpen?"click":"contextmenu"),function(t){t.stopPropagation();t.preventDefault();(new Date).getTime()<I._lastKeyDown+500||I._scheduleOpen(this,f,{x:t.pageX,y:t.pageY},t.target)}),h(q,B("keydown"),function(t){if(93==t.keyCode||t.shiftKey&&t.keyCode==n.F10||I.leftClickToOpen&&t.keyCode==n.SPACE)t.stopPropagation(),t.preventDefault(),I._scheduleOpen(this,
f,null,t.target),I._lastKeyDown=(new Date).getTime()})]});l.connects=g?r(g):[];f&&(l.onloadHandler=d.hitch(this,function(){var q=this._iframeContentWindow(f);q=x.body(q.document);l.connects=r(q)}),f.addEventListener?f.addEventListener("load",l.onloadHandler,!1):f.attachEvent("onload",l.onloadHandler))},unBindDomNode:function(c){try{var f=v.byId(c,this.ownerDocument)}catch(q){return}c="_dijitMenu"+this.id;if(f&&p.has(f,c)){for(var g=p.get(f,c)-1,l=this._bindings[g],r;r=l.connects.pop();)r.remove();
(r=l.iframe)&&(r.removeEventListener?r.removeEventListener("load",l.onloadHandler,!1):r.detachEvent("onload",l.onloadHandler));p.remove(f,c);delete this._bindings[g]}},_scheduleOpen:function(c,f,g,l){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:l,delegatedTarget:c,iframe:f,coords:g})},1))},_openMyself:function(c){function f(){t.refocus&&D&&D.focus();C.close(t)}var g=c.target,l=c.iframe,r=c.coords,q=!r;this.currentTarget=c.delegatedTarget;
if(r){if(l){c=w.position(l,!0);g=this._iframeContentWindow(l);g=w.docScroll(g.document);var k=u.getComputedStyle(l),B=u.toPixelValue,I=(e("ie")&&e("quirks")?0:B(l,k.paddingLeft))+(e("ie")&&e("quirks")?B(l,k.borderLeftWidth):0);l=(e("ie")&&e("quirks")?0:B(l,k.paddingTop))+(e("ie")&&e("quirks")?B(l,k.borderTopWidth):0);r.x+=c.x+I-g.x;r.y+=c.y+l-g.y}}else r=w.position(g,!0),r.x+=10,r.y+=10;var t=this;l=this._focusManager.get("prevNode");c=this._focusManager.get("curNode");var D=!c||v.isDescendant(c,
this.domNode)?l:c;C.open({popup:this,x:r.x,y:r.y,onExecute:f,onCancel:f,orient:this.isLeftToRight()?"L":"R"});this.focus();q||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);C.close(this)}},destroy:function(){A.forEach(this._bindings,function(c){c&&this.unBindDomNode(c.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(G,A,z,v,p,w,u,n,d,h,e,x,m,C,E,a){function c(){this._popupWrapper&&(w.destroy(this._popupWrapper),delete this._popupWrapper)}z=z(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var f=this._firstAroundPosition,g=u.position(this._firstAroundNode,!0),l=g.x-f.x;f=g.y-f.y;if(l||f)for(this._firstAroundPosition=g,g=0;g<this._stack.length;g++){var r=this._stack[g].wrapper.style;r.top=parseFloat(r.top)+f+"px";"auto"==r.right?r.left=parseFloat(r.left)+l+
"px":r.right=parseFloat(r.right)-l+"px"}this._aroundMoveListener=setTimeout(e.hitch(this,"_repositionAll"),l||f?10:50)}},_createWrapper:function(f){var g=f._popupWrapper,l=f.domNode;g||(g=w.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":f["aria-label"]||f.label||f.name||f.id},f.ownerDocumentBody),g.appendChild(l),l=l.style,l.display="",l.visibility="",l.position="",l.top="0px",f._popupWrapper=g,A.after(f,"destroy",c,!0),"ontouchend"in document&&x(g,"touchend",
function(r){/^(input|button|textarea)$/i.test(r.target.tagName)||r.preventDefault()}),g.dojoClick=!0);return g},moveOffScreen:function(f){var g=this._createWrapper(f);f=u.isBodyLtr(f.ownerDocument);var l={visibility:"hidden",top:"-9999px",display:""};l[f?"left":"right"]="-9999px";l[f?"right":"left"]="auto";n.set(g,l);return g},hide:function(f){var g=this._createWrapper(f);n.set(g,{display:"none",height:"auto",overflowY:"visible",border:""});f=f.domNode;"_originalStyle"in f&&(f.style.cssText=f._originalStyle)},
getTopPopup:function(){for(var f=this._stack,g=f.length-1;0<g&&f[g].parent===f[g-1].widget;g--);return f[g]},open:function(f){for(var g=this._stack,l=f.popup,r=l.domNode,q=f.orient||["below","below-alt","above","above-alt"],k=f.parent?f.parent.isLeftToRight():u.isBodyLtr(l.ownerDocument),B=f.around,I=f.around&&f.around.id?f.around.id+"_dropdown":"popup_"+this._idGen++;g.length&&(!f.parent||!v.isDescendant(f.parent.domNode,g[g.length-1].widget.domNode));)this.close(g[g.length-1].widget);var t=this.moveOffScreen(l);
l.startup&&!l._started&&l.startup();var D=u.position(r);if("maxHeight"in f&&-1!=f.maxHeight)var H=f.maxHeight||Infinity;else{H=E.getEffectiveBox(this.ownerDocument);var J=B?u.position(B,!1):{y:f.y-(f.padding||0),h:2*(f.padding||0)};H=Math.floor(Math.max(J.y,H.h-(J.y+J.h)))}D.h>H&&(D=n.getComputedStyle(r),n.set(t,{overflowY:"scroll",height:H+"px",border:D.borderLeftWidth+" "+D.borderLeftStyle+" "+D.borderLeftColor}),r._originalStyle=r.style.cssText,r.style.border="none");p.set(t,{id:I,style:{zIndex:this._beginZIndex+
g.length},"class":"dijitPopup "+(l.baseClass||l["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:f.parent?f.parent.id:""});0==g.length&&B&&(this._firstAroundNode=B,this._firstAroundPosition=u.position(B,!0),this._aroundMoveListener=setTimeout(e.hitch(this,"_repositionAll"),50));d("config-bgIframe")&&!l.bgIframe&&(l.bgIframe=new C(t));I=l.orient?e.hitch(l,"orient"):null;q=B?m.around(t,B,q,k,I):m.at(t,f,"R"==q?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],f.padding,I);t.style.visibility="visible";
r.style.visibility="visible";r=[];r.push(x(t,"keydown",e.hitch(this,function(K){if(K.keyCode==h.ESCAPE&&f.onCancel)K.stopPropagation(),K.preventDefault(),f.onCancel();else if(K.keyCode==h.TAB&&(K.stopPropagation(),K.preventDefault(),(K=this.getTopPopup())&&K.onCancel))K.onCancel()})));l.onCancel&&f.onCancel&&r.push(l.on("cancel",f.onCancel));r.push(l.on(l.onExecute?"execute":"change",e.hitch(this,function(){var K=this.getTopPopup();if(K&&K.onExecute)K.onExecute()})));g.push({widget:l,wrapper:t,parent:f.parent,
onExecute:f.onExecute,onCancel:f.onCancel,onClose:f.onClose,handlers:r});if(l.onOpen)l.onOpen(q);return q},close:function(f){for(var g=this._stack;f&&G.some(g,function(B){return B.widget==f})||!f&&g.length;){var l=g.pop(),r=l.widget,q=l.onClose;r.bgIframe&&(r.bgIframe.destroy(),delete r.bgIframe);if(r.onClose)r.onClose();for(var k;k=l.handlers.pop();)k.remove();r&&r.domNode&&this.hide(r);q&&q()}0==g.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return a.popup=new z})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(G,A,z,v,p,w,u){function n(h,e,x,m){var C=w.getEffectiveBox(h.ownerDocument);h.parentNode&&"body"==String(h.parentNode.tagName).toLowerCase()||p.body(h.ownerDocument).appendChild(h);var E=null;G.some(e,function(f){var g=f.corner,l=f.pos,r=0,q={w:{L:C.l+C.w-l.x,R:l.x-C.l,M:C.w}[g.charAt(1)],
h:{T:C.t+C.h-l.y,B:l.y-C.t,M:C.h}[g.charAt(0)]},k=h.style;k.left=k.right="auto";x&&(r=x(h,f.aroundCorner,g,q,m),r="undefined"==typeof r?0:r);var B=h.style,I=B.display,t=B.visibility;"none"==B.display&&(B.visibility="hidden",B.display="");k=A.position(h);B.display=I;B.visibility=t;I={L:l.x,R:l.x-k.w,M:Math.max(C.l,Math.min(C.l+C.w,l.x+(k.w>>1))-k.w)}[g.charAt(1)];t={T:l.y,B:l.y-k.h,M:Math.max(C.t,Math.min(C.t+C.h,l.y+(k.h>>1))-k.h)}[g.charAt(0)];l=Math.max(C.l,I);B=Math.max(C.t,t);I=Math.min(C.l+C.w,
I+k.w)-l;t=Math.min(C.t+C.h,t+k.h)-B;r+=k.w-I+(k.h-t);if(null==E||r<E.overflow)E={corner:g,aroundCorner:f.aroundCorner,x:l,y:B,w:I,h:t,overflow:r,spaceAvailable:q};return!r});E.overflow&&x&&x(h,E.aroundCorner,E.corner,E.spaceAvailable,m);e=E.y;var a=E.x,c=p.body(h.ownerDocument);/relative|absolute/.test(z.get(c,"position"))&&(e-=z.get(c,"marginTop"),a-=z.get(c,"marginLeft"));c=h.style;c.top=e+"px";c.left=a+"px";c.right="auto";return E}var d={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return u.place={at:function(h,
e,x,m,C){x=G.map(x,function(E){var a={corner:E,aroundCorner:d[E],pos:{x:e.x,y:e.y}};m&&(a.pos.x+="L"==E.charAt(1)?m.x:-m.x,a.pos.y+="T"==E.charAt(0)?m.y:-m.y);return a});return n(h,x,C)},around:function(h,e,x,m,C){function E(D,H){t.push({aroundCorner:D,corner:H,pos:{x:{L:q,R:q+B,M:q+(B>>1)}[D.charAt(1)],y:{T:k,B:k+I,M:k+(I>>1)}[D.charAt(0)]}})}if("string"==typeof e||"offsetWidth"in e||"ownerSVGElement"in e){var a=A.position(e,!0);if(/^(above|below)/.test(x[0])){var c=A.getBorderExtents(e),f=e.firstChild?
A.getBorderExtents(e.firstChild):{t:0,l:0,b:0,r:0},g=A.getBorderExtents(h),l=h.firstChild?A.getBorderExtents(h.firstChild):{t:0,l:0,b:0,r:0};a.y+=Math.min(c.t+f.t,g.t+l.t);a.h-=Math.min(c.t+f.t,g.t+l.t)+Math.min(c.b+f.b,g.b+l.b)}}else a=e;if(e.parentNode)for(c="absolute"==z.getComputedStyle(e).position,e=e.parentNode;e&&1==e.nodeType&&"BODY"!=e.nodeName;){f=A.position(e,!0);g=z.getComputedStyle(e);/relative|absolute/.test(g.position)&&(c=!1);if(!c&&/hidden|auto|scroll/.test(g.overflow)){l=Math.min(a.y+
a.h,f.y+f.h);var r=Math.min(a.x+a.w,f.x+f.w);a.x=Math.max(a.x,f.x);a.y=Math.max(a.y,f.y);a.h=l-a.y;a.w=r-a.x}"absolute"==g.position&&(c=!0);e=e.parentNode}var q=a.x,k=a.y,B="w"in a?a.w:a.w=a.width,I="h"in a?a.h:(v.deprecated("place.around: dijit/place.__Rectangle: { x:"+q+", y:"+k+", height:"+a.height+", width:"+B+" } has been deprecated.  Please use { x:"+q+", y:"+k+", h:"+a.height+", w:"+B+" }","","2.0"),a.h=a.height),t=[];G.forEach(x,function(D){var H=m;switch(D){case "above-centered":E("TM","BM");
break;case "below-centered":E("BM","TM");break;case "after-centered":H=!H;case "before-centered":E(H?"ML":"MR",H?"MR":"ML");break;case "after":H=!H;case "before":E(H?"TL":"TR",H?"TR":"TL");E(H?"BL":"BR",H?"BR":"BL");break;case "below-alt":H=!H;case "below":E(H?"BL":"BR",H?"TL":"TR");E(H?"BR":"BL",H?"TR":"TL");break;case "above-alt":H=!H;case "above":E(H?"TL":"TR",H?"BL":"BR");E(H?"TR":"TL",H?"BR":"BL");break;default:E(D.aroundCorner,D.corner)}});h=n(h,t,C,{w:B,h:I});h.aroundNodePos=a;return h}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(G,A,z,v,p){var w=new G,u;z(function(){var n=p.getBox();w._rlh=A(window,"resize",function(){var h=p.getBox();if(n.h!=h.h||n.w!=h.w)n=h,w.emit("resize")});if(8==v("ie")){var d=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=d&&(d=screen.deviceXDPI,w.emit("resize"))},500)}v("ios")&&(A(document,"focusin",function(h){u=h.target}),A(document,"focusout",function(h){u=null}))});w.getEffectiveBox=
function(n){n=p.getBox(n);var d=u&&u.tagName&&u.tagName.toLowerCase();v("ios")&&u&&!u.readOnly&&("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(u.type))&&(n.h*=0==orientation||180==orientation?.66:.4,d=u.getBoundingClientRect(),n.h=Math.max(n.h,d.top+d.height));return n};return w})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(G,A,z,v,p,w,
u,n){n.add("config-bgIframe",(n("ie")||n("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var d=new function(){var h=[];this.pop=function(){if(h.length){var e=h.pop();e.style.display=""}else 9>n("ie")?(e=z.dojoBlankHtmlUrl||G.toUrl("dojo/resources/blank.html")||'javascript:""',e=document.createElement("\x3ciframe src\x3d'"+e+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(e=v.create("iframe"),e.src='javascript:""',
e.className="dijitBackgroundIframe",e.setAttribute("role","presentation"),p.set(e,"opacity",.1)),e.tabIndex=-1;return e};this.push=function(e){e.style.display="none";h.push(e)}};A.BackgroundIframe=function(h){if(!h.id)throw Error("no id");if(n("config-bgIframe")){var e=this.iframe=d.pop();h.appendChild(e);7>n("ie")||n("quirks")?(this.resize(h),this._conn=u(h,"resize",w.hitch(this,"resize",h))):p.set(e,{width:"100%",height:"100%"})}};w.extend(A.BackgroundIframe,{resize:function(h){this.iframe&&p.set(this.iframe,
{width:h.offsetWidth+"px",height:h.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),d.push(this.iframe),delete this.iframe)}});return A.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(G,A,z,v){return G("dijit.DropDownMenu",v,{templateString:z,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},
_onDownArrow:function(){this.focusNext()},_onRightArrow:function(p){this._moveToPopup(p);p.stopPropagation();p.preventDefault()},_onLeftArrow:function(p){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else p.stopPropagation(),p.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(G,A,z,v,p,w,u,n,d,h,e,x,m,C,E){return A("dijit._MenuBase",[x,E,C,m],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){p.toggle(this.domNode,"dijitMenuActive",a);p.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var c=e.byNode(a);return a.parentNode==this.containerNode&&c&&c.focus},postCreate:function(){var a=this,c="string"==typeof this.childSelector?this.childSelector:w.hitch(this,"childSelector");this.own(n(this.containerNode,n.selector(c,u.enter),function(){a.onItemHover(e.byNode(this))}),n(this.containerNode,n.selector(c,u.leave),function(){a.onItemUnhover(e.byNode(this))}),n(this.containerNode,n.selector(c,h),function(f){a.onItemClick(e.byNode(this),f);f.stopPropagation()}),
n(this.containerNode,n.selector(c,"focusin"),function(){a._onItemFocus(e.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,c,f,g){this.inherited(arguments);if(a&&(-1==g||a.popup&&1==g))this.onItemClick(a,c)},_keyboardSearchCompare:function(a,c){return a.shortcutKey?c==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,c){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",a),this.set("activated",!0),c=/^key/.test(c._origType||
c.type)||0==c.clientX&&0==c.clientY,this._openItemPopup(a,c)):(this.onExecute(),a._onClick?a._onClick(c):a.onClick(c))},_openItemPopup:function(a,c){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var f=a.popup;f.parentMenu=this;this.own(this._mouseoverHandle=n.once(f.domNode,"mouseover",w.hitch(this,"_onPopupHover")));var g=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){c&&
g.focusChild(a);g._cleanUp()},onExecute:w.hitch(this,"_cleanUp",!0),onClose:function(){g._mouseoverHandle&&(g._mouseoverHandle.remove(),delete g._mouseoverHandle)}},c);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(v.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(G,A,z,v,p,w,u,n,d,h,e,x){A=A("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);G.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(C){this.watch(C,w.hitch(this,"_setStateClass"))},this);for(var m in this.cssStateNodes||{})this._trackMouseState(this[m],this.cssStateNodes[m]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(m){if(!this.disabled)switch(m.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function m(g){C=C.concat(G.map(C,function(l){return l+g}),"dijit"+g)}var C=this.baseClass.split(" ");
this.isLeftToRight()||m("Rtl");var E="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&m(E);this.state&&m(this.state);this.selected&&m("Selected");this._opened&&m("Opened");this.disabled?m("Disabled"):this.readOnly?m("ReadOnly"):this.active?m("Active"):this.hovering&&m("Hover");this.focused&&m("Focused");E=this.stateNode||this.domNode;var a={};G.forEach(E.className.split(" "),function(g){a[g]=!0});"_stateClasses"in this&&G.forEach(this._stateClasses,function(g){delete a[g]});G.forEach(C,
function(g){a[g]=!0});var c=[],f;for(f in a)c.push(f);E.className=c.join(" ");this._stateClasses=C},_subnodeCssMouseEvent:function(m,C,E){function a(c){v.toggle(m,C+"Active",c)}if(!this.disabled&&!this.readOnly)switch(E.type){case "mouseover":case "MSPointerOver":case "pointerover":v.toggle(m,C+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":v.toggle(m,C+"Hover",!1);a(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":a(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":a(!1);break;case "focus":case "focusin":v.toggle(m,C+"Focused",!0);break;case "blur":case "focusout":v.toggle(m,C+"Focused",!1)}},_trackMouseState:function(m,C){m._cssState=C}});n(function(){function m(a,c,f){if(!f||!z.isDescendant(f,c))for(;c&&c!=f;c=c.parentNode)if(c._cssState){var g=x.getEnclosingWidget(c);g&&(c==g.domNode?g._cssMouseEvent(a):g._subnodeCssMouseEvent(c,c._cssState,a))}}var C=h.body(),E;u(C,
d.over,function(a){m(a,a.target,a.relatedTarget)});u(C,d.out,function(a){m(a,a.target,a.relatedTarget)});u(C,e.press,function(a){E=a.target;m(a,E)});u(C,e.release,function(a){m(a,E);E=null});u(C,"focusin, focusout",function(a){var c=a.target;if(c._cssState&&!c.getAttribute("widgetId")){var f=x.getEnclosingWidget(c);f&&f._subnodeCssMouseEvent(c,c._cssState,a)}})});return A})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(G,A,z,v,p,w,u,n,d,h){return A("dijit._KeyNavContainer",[d,h,n],{connectKeyNavHandlers:function(e,x){var m=this._keyNavCodes={},C=w.hitch(this,"focusPrev"),E=w.hitch(this,"focusNext");G.forEach(e,function(a){m[a]=C});G.forEach(x,function(a){m[a]=E});m[p.HOME]=w.hitch(this,"focusFirstChild");m[p.END]=w.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){v.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);G.forEach(this.getChildren(),
w.hitch(this,"_startupChild"))},addChild:function(e,x){this.inherited(arguments);this._startupChild(e)},_startupChild:function(e){e.set("tabIndex","-1")},_getFirst:function(){var e=this.getChildren();return e.length?e[0]:null},_getLast:function(){var e=this.getChildren();return e.length?e[e.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(e){return(e=
u.byNode(e))&&e.getParent()==this}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(G,A,z,v){return A("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(p,w){var u=this.containerNode;if(0<w){for(u=u.firstChild;0<w;)1==u.nodeType&&w--,u=u.nextSibling;u?w="before":(u=this.containerNode,w="last")}z.place(p.domNode,u,w);
this._started&&!p._started&&p.startup()},removeChild:function(p){"number"==typeof p&&(p=this.getChildren()[p]);p&&(p=p.domNode)&&p.parentNode&&p.parentNode.removeChild(p)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(p,w){var u=this.getChildren();p=G.indexOf(u,p);return u[p+w]},getIndexOfChild:function(p){return G.indexOf(this.getChildren(),p)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(G,A,z,v,p,w,u,n){return A("dijit._KeyNavMixin",n,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);z.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var d=this._keyNavCodes={};d[v.HOME]=p.hitch(this,"focusFirstChild");d[v.END]=p.hitch(this,"focusLastChild");d[this.isLeftToRight()?v.LEFT_ARROW:v.RIGHT_ARROW]=p.hitch(this,"_onLeftArrow");d[this.isLeftToRight()?v.RIGHT_ARROW:v.LEFT_ARROW]=p.hitch(this,"_onRightArrow");d[v.UP_ARROW]=p.hitch(this,
"_onUpArrow");d[v.DOWN_ARROW]=p.hitch(this,"_onDownArrow")}var h=this;d="string"==typeof this.childSelector?this.childSelector:p.hitch(this,"childSelector");this.own(w(this.domNode,"keypress",p.hitch(this,"_onContainerKeypress")),w(this.domNode,"keydown",p.hitch(this,"_onContainerKeydown")),w(this.domNode,"focus",p.hitch(this,"_onContainerFocus")),w(this.containerNode,w.selector(d,"focusin"),function(e){h._onChildFocus(u.getEnclosingWidget(this),e)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(d,h){d&&(this.focusedChild&&d!==this.focusedChild&&this._onChildBlur(this.focusedChild),
d.set("tabIndex",this.tabIndex),d.focus(h?"end":"start"))},_onContainerFocus:function(d){d.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){z.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(d){z.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(d){d&&d!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),d.set("tabIndex",this.tabIndex),this.lastFocused=d,this._set("focusedChild",d))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(d,h,e,x){d&&this.focusChild(d)},_keyboardSearchCompare:function(d,h){var e=d.domNode;d=(d.label||(e.focusNode?e.focusNode.label:"")||e.innerText||e.textContent||"").replace(/^\s+/,"").substr(0,h.length).toLowerCase();return h.length&&d==h?-1:0},_isFormElement:function(d){return"INPUT"===
d.tagName||"TEXTAREA"===d.tagName||"SELECT"===d.tagName||"BUTTON"===d.tagName},_onContainerKeydown:function(d){if(!this._isFormElement(document.activeElement)){var h=this._keyNavCodes[d.keyCode];h?(h(d,this.focusedChild),d.stopPropagation(),d.preventDefault(),this._searchString=""):d.keyCode!=v.SPACE||!this._searchTimer||d.ctrlKey||d.altKey||d.metaKey||(d.stopImmediatePropagation(),d.preventDefault(),this._keyboardSearch(d," "))}},_onContainerKeypress:function(d){this._isFormElement(document.activeElement)||
d.charCode<=v.SPACE||d.ctrlKey||d.altKey||d.metaKey||(d.preventDefault(),d.stopPropagation(),this._keyboardSearch(d,String.fromCharCode(d.charCode).toLowerCase()))},_keyboardSearch:function(d,h){var e=null,x,m=0;p.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=h;var C=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;x=this._searchString.substr(0,C);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);
var E=this.focusedChild||null;if(1==C||!E)if(E=this._getNextFocusableChild(E,1),!E)return;C=E;do{var a=this._keyboardSearchCompare(E,x);a&&0==m++&&(e=E);if(-1==a){m=-1;break}E=this._getNextFocusableChild(E,1)}while(E&&E!=C)})();this.onKeyboardSearch(e,d,x,m)},_onChildBlur:function(){},_getNextFocusableChild:function(d,h){var e=d;do{if(d)d=this._getNext(d,h);else if(d=this[0<h?"_getFirst":"_getLast"](),!d)break;if(null!=d&&d!=e&&d.isFocusable())return d}while(d!=e);return null},_getFirst:function(){return null},
_getLast:function(){return null},_getNext:function(d,h){if(d)for(d=d.domNode;d;)if((d=d[0>h?"previousSibling":"nextSibling"])&&"getAttribute"in d){var e=u.byNode(d);if(e)return e}return null}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(G,A,z,v,p,w,u,n){var d=A("dijit._TemplatedMixin",n,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,
_stringRepl:function(h){var e=this.declaredClass,x=this;return u.substitute(h,this,function(m,C){"!"==C.charAt(0)&&(m=v.getObject(C.substr(1),!1,x));if("undefined"==typeof m)throw Error(e+" template:"+C);return null==m?"":"!"==C.charAt(0)?m:this._escapeValue(""+m)},this)},_escapeValue:function(h){return h.replace(/["'<>&]/g,function(e){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[e]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=G(this.templatePath,{sanitize:!0}));var h=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(v.isString(h)){var e=z.toDom(this._stringRepl(h),this.ownerDocument);if(1!=e.nodeType)throw Error("Invalid template: "+h);}else e=h.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(h){var e=this.containerNode;if(h&&e)for(;h.hasChildNodes();)e.appendChild(h.firstChild)}});
d._templateCache={};d.getCachedTemplate=function(h,e,x){var m=d._templateCache,C=h,E=m[C];if(E){try{if(!E.ownerDocument||E.ownerDocument==(x||document))return E}catch(a){}z.destroy(E)}h=u.trim(h);if(e||h.match(/\$\{([^\}]+)\}/g))return m[C]=h;e=z.toDom(h,x);if(1!=e.nodeType)throw Error("Invalid template: "+h);return m[C]=e};w("ie")&&p(window,"unload",function(){var h=d._templateCache,e;for(e in h){var x=h[e];"object"==typeof x&&z.destroy(x);delete h[e]}});return d})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(G){return G.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(G,A,z,v,p,w,u,n,d){var h=p.delegate(n,{mouseenter:w.enter,mouseleave:w.leave,keypress:z._keypress}),e;z=v("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(x){for(var m=x;;)if(1==m.nodeType&&(this._processTemplateNode(m,function(C,E){return C.getAttribute(E)},this._attach)||this.searchContainerNode)&&m.firstChild)m=m.firstChild;else{if(m==x)break;for(;!m.nextSibling;)if(m=m.parentNode,m==x)return;m=m.nextSibling}},_processTemplateNode:function(x,m,C){var E=!0,a=this.attachScope||this,c=m(x,"dojoAttachPoint")||m(x,"data-dojo-attach-point");if(c)for(var f=c.split(/\s*,\s*/);c=
f.shift();)p.isArray(a[c])?a[c].push(x):a[c]=x,E="containerNode"!=c,this._attachPoints.push(c);if(m=m(x,"dojoAttachEvent")||m(x,"data-dojo-attach-event"))for(c=m.split(/\s*,\s*/),f=p.trim;m=c.shift();)if(m){var g=null;-1!=m.indexOf(":")?(g=m.split(":"),m=f(g[0]),g=f(g[1])):m=f(m);g||(g=m);this._attachEvents.push(C(x,m,p.hitch(a,g)))}return E},_attach:function(x,m,C){m=m.replace(/^on/,"").toLowerCase();m="dijitclick"==m?e||(e=G("./a11yclick")):h[m]||m;return u(x,m,C)},_detachTemplateNodes:function(){var x=
this.attachScope||this;A.forEach(this._attachPoints,function(m){delete x[m]});this._attachPoints=[];A.forEach(this._attachEvents,function(m){m.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});p.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return z})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(G,A,z,v,p,w,u,n,d,h,e,x){u=G("dijit.MenuItem"+(w("dojo-bidi")?"_NoBidi":""),[n,d,h,e],{templateString:x,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(m){this._set("label",m);var C="";var E=m.search(/{\S}/);if(0<=E){C=m.charAt(E+1);var a=m.substr(0,E);m=m.substr(E+3);E=a+C+m;m=a+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+C+"\x3c/span\x3e"+m}else E=m;this.domNode.setAttribute("aria-label",E+" "+this.accelKey);this.containerNode.innerHTML=m;this._set("shortcutKey",C)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(m){!m||"label"in this.params||this._set("label",m.innerHTML)},buildRendering:function(){this.inherited(arguments);z.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&z.set(this.accelKeyNode,"id",this.id+"_accel");A.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==w("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(m){}},_setSelected:function(m){v.toggle(this.domNode,
"dijitMenuItemSelected",m)},setLabel:function(m){p.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",m)},setDisabled:function(m){p.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",m)},_setDisabledAttr:function(m){this.focusNode.setAttribute("aria-disabled",m?"true":"false");this._set("disabled",m)},_setAccelKeyAttr:function(m){this.accelKeyNode&&(this.accelKeyNode.style.display=
m?"":"none",this.accelKeyNode.innerHTML=m,z.set(this.containerNode,"colSpan",m?"1":"2"));this._set("accelKey",m)}});w("dojo-bidi")&&(u=G("dijit.MenuItem",u,{_setLabelAttr:function(m){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return u})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(G,A){return G("dijit._Contained",null,{_getSibling:function(z){var v=this.getParent();return v&&v._getSiblingOfChild&&v._getSiblingOfChild(this,
"previous"==z?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var z=this.getParent();return z&&z.getIndexOfChild?z.getIndexOfChild(this):-1}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(G,A,z,v,p,w){G=G(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",
polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var u=z.map(this.polygons,function(d){return d.toJson()}),n={};n.polygons=v.toJson(u);u=this.polygons[0].spatialReference;n.sr=u.wkid?u.wkid:v.toJson(u.toJson());this.lengthUnit&&(n.lengthUnit=this.lengthUnit);this.areaUnit&&(A.isString(this.areaUnit)?n.areaUnit=v.toJson({areaUnit:this.areaUnit}):n.areaUnit=this.areaUnit);this.calculationType&&(n.calculationType=this.calculationType);return n}});p("extend-esri")&&A.setObject("tasks.AreasAndLengthsParameters",
G,w);return G})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(G,A,z,v,p,w){G=G(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var u=z.map(this.polylines,function(d){return d.toJson()}),n={};n.polylines=v.toJson(u);u=this.polylines[0].spatialReference;n.sr=u.wkid?u.wkid:v.toJson(u.toJson());this.lengthUnit&&
(n.lengthUnit=this.lengthUnit);this.geodesic&&(n.geodesic=this.geodesic);this.calculationType&&(n.calculationType=this.calculationType);return n}});p("extend-esri")&&A.setObject("tasks.LengthsParameters",G,w);return G})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(G,A,z,v,p,w,u,n,d,h,e,x,m,C,E){G=G(h,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=A.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=
a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);
this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var c=[],f,g=a.length;for(f=0;f<g;f++)c.push(a[f].toJson());
return{geometryType:E.getJsonType(a[0]),geometries:c}},_decodeGeometries:function(a,c,f){var g=E.getGeometryType(c);a=a.geometries;var l=[],r={spatialReference:f.toJson()},q=A.mixin;z.forEach(a,function(k,B){l[B]=new g(q(k,r))});return l},_toProjectGeometry:function(a){var c=a.spatialReference.toJson();return a instanceof e?new m({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:c}):new x({paths:[[].concat(a.points)],spatialReference:c})},
_fromProjectedGeometry:function(a,c,f){return"esriGeometryEnvelope"===c?(a=a.rings[0],new e(a[0][0],a[0][1],a[2][0],a[2][1],f)):new C({points:a.paths[0],spatialReference:f.toJson()})},project:function(a,c,f,g){var l=A.mixin({},this._url.query,{f:"json"});if(a.geometries){g=f;f=c;c=a.outSR;var r=a.geometries[0];l=A.mixin(l,a.toJson())}else r=a[0],l=A.mixin(l,{outSR:c.wkid||v.toJson(c.toJson()),inSR:r.spatialReference.wkid||v.toJson(r.spatialReference.toJson()),geometries:v.toJson(this._encodeGeometries(a))});
var q=E.getJsonType(r),k=this._projectHandler,B=this._errorHandler,I=new p(d._dfdCanceller);I._pendingDfd=n({url:this._url.path+"/project",content:l,callbackParamName:"callback",load:function(t,D){k(t,D,q,c,f,g,I)},error:function(t){B(t,g,I)}});return I},_projectHandler:function(a,c,f,g,l,r,q){try{var k=this._decodeGeometries(a,f,g);this._successHandler([k],"onProjectComplete",l,q)}catch(B){this._errorHandler(B,r,q)}},onProjectComplete:function(){},simplify:function(a,c,f){var g=a[0].spatialReference,
l=A.mixin({},this._url.query,{f:"json",sr:g.wkid?g.wkid:v.toJson(g.toJson()),geometries:v.toJson(this._encodeGeometries(a))}),r=E.getJsonType(a[0]),q=this._simplifyHandler,k=this._errorHandler,B=new p(d._dfdCanceller);B._pendingDfd=n({url:this._url.path+"/simplify",content:l,callbackParamName:"callback",load:function(I,t){q(I,t,r,g,c,f,B)},error:function(I){k(I,f,B)}});return B},_simplifyHandler:function(a,c,f,g,l,r,q){try{var k=this._decodeGeometries(a,f,g);this._successHandler([k],"onSimplifyComplete",
l,q)}catch(B){this._errorHandler(B,r,q)}},onSimplifyComplete:function(){},convexHull:function(a,c,f){var g=a[0].spatialReference;a=A.mixin({},this._url.query,{f:"json",sr:v.toJson(g.toJson()),geometries:v.toJson(this._encodeGeometries(a))});var l=this._convexHullHandler,r=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=n({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(k,B){l(k,B,g,c,f,q)},error:function(k){r(k,f,q)}});return q},_convexHullHandler:function(a,
c,f,g,l,r){try{var q=E.fromJson(a.geometry).setSpatialReference(f);this._successHandler([q],"onConvexHullComplete",g,r)}catch(k){this._errorHandler(k,l,r)}},onConvexHullComplete:function(){},union:function(a,c,f){var g=a[0].spatialReference;a=A.mixin({},this._url.query,{f:"json",sr:v.toJson(g.toJson()),geometries:v.toJson(this._encodeGeometries(a))});var l=this._unionHandler,r=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=n({url:this._url.path+"/union",content:a,callbackParamName:"callback",
load:function(k,B){l(k,B,g,c,f,q)},error:function(k){r(k,f,q)}});return q},_unionHandler:function(a,c,f,g,l,r){try{var q=E.fromJson(a.geometry).setSpatialReference(f);this._successHandler([q],"onUnionComplete",g,r)}catch(k){this._errorHandler(k,l,r)}},onUnionComplete:function(){},autoComplete:function(a,c,f,g){var l=a[0].spatialReference;a=A.mixin({},this._url.query,{f:"json",sr:v.toJson(l.toJson()),polygons:v.toJson(this._encodeGeometries(a).geometries),polylines:v.toJson(this._encodeGeometries(c).geometries)});
var r=this._autoCompleteHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(B,I){r(B,I,l,f,g,k)},error:function(B){q(B,g,k)}});return k},_autoCompleteHandler:function(a,c,f,g,l,r){try{var q=a.geometries;a=[];var k,B=q.length;for(k=0;k<B;k++)a[k]=new m({spatialReference:f,rings:q[k].rings});this._successHandler([a],"onAutoCompleteComplete",g,r)}catch(I){this._errorHandler(I,l,r)}},onAutoCompleteComplete:function(){},
reshape:function(a,c,f,g){var l=a.spatialReference;a=A.mixin({},this._url.query,{f:"json",sr:v.toJson(l.toJson()),target:v.toJson({geometryType:E.getJsonType(a),geometry:a.toJson()}),reshaper:v.toJson(c.toJson())});var r=this._reshapeHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(B,I){r(B,I,l,f,g,k)},error:function(B){q(B,g,k)}});return k},_reshapeHandler:function(a,c,f,g,l,r){try{var q=E.fromJson(a.geometry).setSpatialReference(f);
this._successHandler([q],"onReshapeComplete",g,r)}catch(k){this._errorHandler(k,l,r)}},onReshapeComplete:function(){},cut:function(a,c,f,g){var l=a[0].spatialReference,r=z.map(a,function(I){return I.toJson()});a=A.mixin({},this._url.query,{f:"json",sr:v.toJson(l.toJson()),target:v.toJson({geometryType:E.getJsonType(a[0]),geometries:r}),cutter:v.toJson(c.toJson())});var q=this._cutHandler,k=this._errorHandler,B=new p(d._dfdCanceller);B._pendingDfd=n({url:this._url.path+"/cut",content:a,callbackParamName:"callback",
load:function(I,t){q(I,t,l,f,g,B)},error:function(I){k(I,g,B)}});return B},_cutHandler:function(a,c,f,g,l,r){try{var q=a.geometries,k={};k.cutIndexes=a.cutIndexes;k.geometries=[];z.forEach(q,function(B){k.geometries.push(E.fromJson(B).setSpatialReference(f))});this._successHandler([k],"onCutComplete",g,r)}catch(B){this._errorHandler(B,l,r)}},onCutComplete:function(){},intersect:function(a,c,f,g){var l=a[0].spatialReference;a=A.mixin({},this._url.query,{f:"json",sr:v.toJson(l.toJson()),geometries:v.toJson(this._encodeGeometries(a)),
geometry:v.toJson({geometryType:E.getJsonType(c),geometry:c.toJson()})});var r=this._intersectHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(B,I){r(B,I,l,f,g,k)},error:function(B){q(B,g,k)}});return k},_intersectHandler:function(a,c,f,g,l,r){try{var q=[];z.forEach(a.geometries,function(k){q.push(E.fromJson(k).setSpatialReference(f))});this._successHandler([q],"onIntersectComplete",g,r)}catch(k){this._errorHandler(k,
l,r)}},onIntersectComplete:function(){},difference:function(a,c,f,g){var l=a[0].spatialReference;a=A.mixin({},this._url.query,{f:"json",sr:v.toJson(l.toJson()),geometries:v.toJson(this._encodeGeometries(a)),geometry:v.toJson({geometryType:E.getJsonType(c),geometry:c.toJson()})});var r=this._differenceHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(B,I){r(B,I,l,f,g,k)},error:function(B){q(B,
g,k)}});return k},_differenceHandler:function(a,c,f,g,l,r){try{var q=[];z.forEach(a.geometries,function(k){q.push(E.fromJson(k).setSpatialReference(f))});this._successHandler([q],"onDifferenceComplete",g,r)}catch(k){this._errorHandler(k,l,r)}},onDifferenceComplete:function(){},buffer:function(a,c,f){var g=A.mixin({},this._url.query,{f:"json"},a.toJson()),l=a.outSpatialReference||a.geometries[0].spatialReference,r=this._bufferHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+
"/buffer",content:g,callbackParamName:"callback",load:function(B,I){r(B,I,l,c,f,k)},error:function(B){q(B,f,k)}});return k},_bufferHandler:function(a,c,f,g,l,r){try{var q=a.geometries;a=[];var k,B=q.length;for(k=0;k<B;k++)a[k]=new m({spatialReference:f,rings:q[k].rings});this._successHandler([a],"onBufferComplete",g,r)}catch(I){this._errorHandler(I,l,r)}},onBufferComplete:function(){},areasAndLengths:function(a,c,f){a=A.mixin({},this._url.query,{f:"json"},a.toJson());var g=this._areasAndLengthsHandler,
l=this._errorHandler,r=new p(d._dfdCanceller);r._pendingDfd=n({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(q,k){g(q,k,c,f,r)},error:function(q){l(q,f,r)}});return r},_areasAndLengthsHandler:function(a,c,f,g,l){try{this._successHandler([a],"onAreasAndLengthsComplete",f,l)}catch(r){this._errorHandler(r,g,l)}},onAreasAndLengthsComplete:function(){},lengths:function(a,c,f){a=A.mixin({},this._url.query,{f:"json"},a.toJson());var g=this._lengthsHandler,l=this._errorHandler,
r=new p(d._dfdCanceller);r._pendingDfd=n({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(q,k){g(q,k,c,f,r)},error:function(q){l(q,f,r)}});return r},_lengthsHandler:function(a,c,f,g,l){try{this._successHandler([a],"onLengthsComplete",f,l)}catch(r){this._errorHandler(r,g,l)}},onLengthsComplete:function(){},labelPoints:function(a,c,f){var g=z.map(a,function(B){return B.toJson()}),l=a[0].spatialReference;g=A.mixin({},this._url.query,{f:"json",sr:l.wkid?l.wkid:v.toJson(l.toJson()),
polygons:v.toJson(g)});var r=this._labelPointsHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/labelPoints",content:g,callbackParamName:"callback",load:function(B,I){r(B,I,a,l,c,f,k)},error:function(B){q(B,f,k)}});return k},_labelPointsHandler:function(a,c,f,g,l,r,q){try{var k=[];z.forEach(a.labelPoints,function(B){k.push(E.fromJson(B).setSpatialReference(g))});this._successHandler([k],"onLabelPointsComplete",l,q)}catch(B){this._errorHandler(B,r,q)}},onLabelPointsComplete:function(){},
relation:function(a,c,f){a=A.mixin({},this._url.query,{f:"json"},a.toJson());var g=this._relationHandler,l=this._errorHandler,r=new p(d._dfdCanceller);r._pendingDfd=n({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(q,k){g(q,k,c,f,r)},error:function(q){l(q,f,r)}});return r},_relationHandler:function(a,c,f,g,l){try{this._successHandler([a.relations],"onRelationComplete",f,l)}catch(r){this._errorHandler(r,g,l)}},onRelationComplete:function(){},trimExtend:function(a,
c,f){var g=A.mixin({},this._url.query,{f:"json"},a.toJson()),l=a.sr,r=this._trimExtendHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/trimExtend",content:g,callbackParamName:"callback",load:function(B,I){r(B,I,l,c,f,k)},error:function(B){q(B,f,k)}});return k},_trimExtendHandler:function(a,c,f,g,l,r){try{var q=a.geometries;a=[];var k,B=q.length;for(k=0;k<B;k++)a[k]=new x({spatialReference:f,paths:q[k].paths});this._successHandler([a],"onTrimExtendComplete",
g,r)}catch(I){this._errorHandler(I,l,r)}},onTrimExtendComplete:function(){},densify:function(a,c,f){var g=A.mixin({},this._url.query,{f:"json"},a.toJson()),l=a.geometries[0].spatialReference,r=this._densifyHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/densify",content:g,callbackParamName:"callback",load:function(B,I){r(B,I,l,c,f,k)},error:function(B){q(B,f,k)}});return k},_densifyHandler:function(a,c,f,g,l,r){try{var q=[];z.forEach(a.geometries,function(k){q.push(E.fromJson(k).setSpatialReference(f))});
this._successHandler([q],"onDensifyComplete",g,r)}catch(k){this._errorHandler(k,l,r)}},onDensifyComplete:function(){},generalize:function(a,c,f){var g=A.mixin({},this._url.query,{f:"json"},a.toJson()),l=a.geometries[0].spatialReference,r=this._generalizeHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/generalize",content:g,callbackParamName:"callback",load:function(B,I){r(B,I,l,c,f,k)},error:function(B){q(B,f,k)}});return k},_generalizeHandler:function(a,
c,f,g,l,r){try{var q=[];z.forEach(a.geometries,function(k){q.push(E.fromJson(k).setSpatialReference(f))});this._successHandler([q],"onGeneralizeComplete",g,r)}catch(k){this._errorHandler(k,l,r)}},onGeneralizeComplete:function(){},offset:function(a,c,f){var g=A.mixin({},this._url.query,{f:"json"},a.toJson()),l=a.geometries[0].spatialReference,r=this._offsetHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=n({url:this._url.path+"/offset",content:g,callbackParamName:"callback",load:function(B,
I){r(B,I,l,c,f,k)},error:function(B){q(B,f,k)}});return k},_offsetHandler:function(a,c,f,g,l,r){try{var q=[];z.forEach(a.geometries,function(k){q.push(E.fromJson(k).setSpatialReference(f))});this._successHandler([q],"onOffsetComplete",g,r)}catch(k){this._errorHandler(k,l,r)}},onOffsetComplete:function(){},distance:function(a,c,f){var g=A.mixin({},this._url.query,{f:"json"},a.toJson()),l=a.geometry1.spatialReference,r=this._distanceHandler,q=this._errorHandler,k=new p(d._dfdCanceller);k._pendingDfd=
n({url:this._url.path+"/distance",content:g,callbackParamName:"callback",load:function(B,I){r(B,I,l,c,f,k)},error:function(B){q(B,f,k)}});return k},_distanceHandler:function(a,c,f,g,l,r){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",g,r)}catch(q){this._errorHandler(q,l,r)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,c,f){var g={};A.isObject(a.sr)?g.sr=a.sr.wkid||v.toJson(a.sr.toJson()):g.sr=a.sr;g.coordinates=v.toJson(a.coordinates);g.conversionType=a.conversionType||
"MGRS";g.conversionMode=a.conversionMode;g.numOfDigits=a.numOfDigits;g.rounding=a.rounding;g.addSpaces=a.addSpaces;a=A.mixin({},this._url.query,{f:"json"},g);var l=this._toGeoCoordinateHandler,r=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=n({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(k,B){l(k,B,c,f,q)},error:function(k){r(k,f,q)}});return q},_toGeoCoordinateHandler:function(a,c,f,g,l){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
f,l)}catch(r){this._errorHandler(r,g,l)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,c,f){var g={};A.isObject(a.sr)?g.sr=a.sr.wkid||v.toJson(a.sr.toJson()):g.sr=a.sr;g.strings=v.toJson(a.strings);g.conversionType=a.conversionType||"MGRS";g.conversionMode=a.conversionMode;a=A.mixin({},this._url.query,{f:"json"},g);var l=this._fromGeoCoordinateHandler,r=this._errorHandler,q=new p(d._dfdCanceller);q._pendingDfd=n({url:this._url.path+"/fromGeoCoordinateString",content:a,
callbackParamName:"callback",load:function(k,B){l(k,B,c,f,q)},error:function(k){r(k,f,q)}});return q},_fromGeoCoordinateHandler:function(a,c,f,g,l){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",f,l)}catch(r){this._errorHandler(r,g,l)}},onFromGeoCoordinateStringComplete:function(){}});A.mixin(G,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});w("extend-esri")&&A.setObject("tasks.GeometryService",G,u);return G})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(G,A,z,v,p,w,u,n){G=G(n,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(d,h){d&&A.isString(d)&&(this._url=u.urlToObject(this.url=d));h&&h.requestOptions&&(this.requestOptions=h.requestOptions);this.normalization=!0;this._errorHandler=A.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var d=this._url,h=/^http:/i;this.url&&(this.url=this.url.replace(h,"https:"));d&&d.path&&(d.path=d.path.replace(h,"https:"))},_encode:function(d,h,e){var x={},m;for(m in d)if("declaredClass"!==
m){var C=d[m];var E=typeof C;if(null!==C&&void 0!==C&&"function"!==E)if(A.isArray(C)){x[m]=[];var a=C.length;for(E=0;E<a;E++)x[m][E]=this._encode(C[E])}else"object"===E?C.toJson&&(E=C.toJson(e&&e[m]),"esri.tasks.FeatureSet"===C.declaredClass&&E.spatialReference&&(E.sr=E.spatialReference,delete E.spatialReference),x[m]=h?E:z.toJson(E)):x[m]=C}return x},_successHandler:function(d,h,e,x){h&&this[h].apply(this,d);e&&e.apply(null,d);x&&w._resDfd(x,d)},_errorHandler:function(d,h,e){this.onError(d);h&&h(d);
e&&e.errback(d)},setNormalization:function(d){this.normalization=d},onError:function(){}});v("extend-esri")&&(p.Task=G);return G})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(G,A,z,v){var p=function(u,n){return u-n},w={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(u){var n=String(u),d=n.match(w._reNumber);u={integer:0,fractional:0};d&&d[1]?(u.integer=d[1].split("").length,u.fractional=d[3]?d[3].split("").length:0):-1<
n.toLowerCase().indexOf("e")&&(d=n.split("e"),n=d[0],d=d[1],n&&d&&(n=Number(n),d=Number(d),(u=0<d)||(d=Math.abs(d)),n=w.getDigits(n),u?(n.integer+=d,n.fractional=d>n.fractional?0:n.fractional-d):(n.fractional+=d,n.integer=d>n.integer?1:n.integer-d),u=n));return u},getFixedNumbers:function(u,n){var d=Number(u.toFixed(n));d<u?u=d+1/Math.pow(10,n):(u=d,d-=1/Math.pow(10,n));d=Number(d.toFixed(n));u=Number(u.toFixed(n));return[d,u]},getPctChange:function(u,n,d,h){var e={prev:null,next:null};if(null!=d){var x=
u-d;e.prev=Math.floor(Math.abs(100*(n-d-x)/x))}null!=h&&(x=h-u,e.next=Math.floor(Math.abs(100*(h-n-x)/x)));return e},round:function(u,n){u=u.slice(0);var d,h,e=n&&null!=n.tolerance?n.tolerance:2,x=n&&n.indexes,m=n&&null!=n.strictBounds?n.strictBounds:!1;if(x)x.sort(p);else for(x=[],d=0;d<u.length;d++)x.push(d);for(d=0;d<x.length;d++){var C=x[d];n=u[C];var E=0===C?null:u[C-1];var a=C===u.length-1?null:u[C+1];var c=w.getDigits(n);if(c=c.fractional){var f=0;for(h=!1;f<=c&&!h;){var g=w.getFixedNumbers(n,
f);g=m&&0===d?g[1]:g[0];h=w.hasMinimalChange(n,g,E,a,e);f++}h&&(u[C]=g)}}return u},hasMinimalChange:function(u,n,d,h,e){u=w.getPctChange(u,n,d,h);n=null==u.prev||u.prev<=e;d=null==u.next||u.next<=e;return n&&d||u.prev+u.next<=2*e},_reAllZeros:new RegExp("\\"+z.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(u,n){n=n||{places:20,round:-1};(u=A.format(u,n))&&(u=u.replace(w._reSomeZeros,"$1").replace(w._reAllZeros,""));return u}};G("extend-esri")&&(v.numberUtils=w);return w})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(G,A,z,v,p){return z("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var w=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);p.parse(w,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,
contextRequire:this.contextRequire,scope:"dojo"}).then(v.hitch(this,function(u){this._startupWidgets=u;for(var n=0;n<u.length;n++)this._processTemplateNode(u[n],function(d,h){return d[h]},function(d,h,e){return h in d?d.connect(d,h,e):d.on(h,e,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(w,u,n){return u(w,"dojoType")||u(w,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){G.forEach(this._startupWidgets,function(w){w&&!w._started&&w.startup&&w.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(G,
A,z,v,p,w,u,n,d,h,e,x,m,C,E,a){function c(q){return eval("("+q+")")}function f(q){var k=q._nameCaseMap,B=q.prototype;if(!k||k._extendCnt<l){k=q._nameCaseMap={};for(var I in B)"_"!==I.charAt(0)&&(k[I.toLowerCase()]=I);k._extendCnt=l}return k}function g(q,k){k||(k=G);var B=k._dojoParserCtorMap||(k._dojoParserCtorMap={}),I=q.join();if(!B[I]){for(var t=[],D=0,H=q.length;D<H;D++){var J=q[D];t[t.length]=B[J]=B[J]||z.getObject(J)||~J.indexOf("/")&&k(J)}q=t.shift();B[I]=t.length?q.createSubclass?q.createSubclass(t):
q.extend.apply(q,t):q}return B[I]}new Date("X");var l=0;d.after(z,"extend",function(){l++},!0);var r={_clearCache:function(){l++;_ctorMap={}},_functionFromScript:function(q,k){var B="",I="",t=q.getAttribute(k+"args")||q.getAttribute("args");k=q.getAttribute("with");t=(t||"").split(/\s*,\s*/);k&&k.length&&v.forEach(k.split(/\s*,\s*/),function(D){B+="with("+D+"){";I+="}"});return new Function(t,B+q.innerHTML+I)},instantiate:function(q,k,B){k=k||{};B=B||{};var I=(B.scope||A._scopeName)+"Type",t="data-"+
(B.scope||A._scopeName)+"-",D=t+"type",H=t+"mixins",J=[];v.forEach(q,function(K){var Q=I in k?k[I]:K.getAttribute(D)||K.getAttribute(I);if(Q){var N=K.getAttribute(H);Q=N?[Q].concat(N.split(/\s*,\s*/)):[Q];J.push({node:K,types:Q})}});return this._instantiate(J,k,B)},_instantiate:function(q,k,B,I){function t(D){k._started||B.noStart||v.forEach(D,function(H){"function"!==typeof H.startup||H._started||H.startup()});return D}q=v.map(q,function(D){var H=D.ctor||g(D.types,B.contextRequire);if(!H)throw Error("Unable to resolve constructor for: '"+
D.types.join()+"'");return this.construct(H,D.node,k,B,D.scripts,D.inherited)},this);return I?h(q).then(t):t(q)},construct:function(q,k,B,I,t,D){function H(F){X&&z.setObject(X,F);for(M=0;M<S.length;M++)d[S[M].advice||"after"](F,S[M].method,z.hitch(F,S[M].func),!0);for(M=0;M<U.length;M++)U[M].call(F);for(M=0;M<b.length;M++)F.watch(b[M].prop,b[M].func);for(M=0;M<y.length;M++)E(F,y[M].event,y[M].func);return F}var J=q&&q.prototype;I=I||{};var K={};I.defaults&&z.mixin(K,I.defaults);D&&z.mixin(K,D);if(m("dom-attributes-explicit"))var Q=
k.attributes;else m("dom-attributes-specified-flag")?Q=v.filter(k.attributes,function(F){return F.specified}):(D=(/^input$|^img$/i.test(k.nodeName)?k:k.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),Q=v.map(D.split(/\s+/),function(F){var L=F.toLowerCase();return{name:F,value:"LI"==k.nodeName&&"value"==F||"enctype"==L?k.getAttribute(L):k.getAttributeNode(L).value}}));var N=I.scope||A._scopeName;D="data-"+N+"-";var O={};"dojo"!==
N&&(O[D+"props"]="data-dojo-props",O[D+"type"]="data-dojo-type",O[D+"mixins"]="data-dojo-mixins",O[N+"type"]="dojotype",O[D+"id"]="data-dojo-id");var M=0,P;N=[];for(var X,Y;P=Q[M++];){var V=P.name,R=V.toLowerCase();P=P.value;switch(O[R]||R){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":Y=P;break;case "data-dojo-id":case "jsid":X=P;break;case "data-dojo-attach-point":case "dojoattachpoint":K.dojoAttachPoint=P;break;case "data-dojo-attach-event":case "dojoattachevent":K.dojoAttachEvent=
P;break;case "class":K["class"]=k.className;break;case "style":K.style=k.style&&k.style.cssText;break;default:if(V in J||(V=f(q)[R]||V),V in J)switch(typeof J[V]){case "string":K[V]=P;break;case "number":K[V]=P.length?Number(P):NaN;break;case "boolean":K[V]="false"!=P.toLowerCase();break;case "function":""===P||-1!=P.search(/[^\w\.]+/i)?K[V]=new Function(P):K[V]=z.getObject(P,!1)||new Function(P);N.push(V);break;default:R=J[V],K[V]=R&&"length"in R?P?P.split(/\s*,\s*/):[]:R instanceof Date?""==P?new Date(""):
"now"==P?new Date:e.fromISOString(P):R instanceof n?A.baseUrl+P:c(P)}else K[V]=P}}for(Q=0;Q<N.length;Q++)O=N[Q].toLowerCase(),k.removeAttribute(O),k[O]=null;if(Y)try{Y=c.call(I.propsThis,"{"+Y+"}"),z.mixin(K,Y)}catch(F){throw Error(F.toString()+" in data-dojo-props\x3d'"+Y+"'");}z.mixin(K,B);t||(t=q&&(q._noScript||J._noScript)?[]:C("\x3e script[type^\x3d'dojo/']",k));var S=[],U=[],b=[],y=[];if(t)for(M=0;M<t.length;M++)O=t[M],k.removeChild(O),B=O.getAttribute(D+"event")||O.getAttribute("event"),I=
O.getAttribute(D+"prop"),Y=O.getAttribute(D+"method"),N=O.getAttribute(D+"advice"),Q=O.getAttribute("type"),O=this._functionFromScript(O,D),B?"dojo/connect"==Q?S.push({method:B,func:O}):"dojo/on"==Q?y.push({event:B,func:O}):K[B]=O:"dojo/aspect"==Q?S.push({method:Y,advice:N,func:O}):"dojo/watch"==Q?b.push({prop:I,func:O}):U.push(O);q=(t=q.markupFactory||J.markupFactory)?t(K,k,q):new q(K,k);return q.then?q.then(H):H(q)},scan:function(q,k){function B(R){if(!R.inherited){R.inherited={};var S=R.node,U=
B(R.parent);S={dir:S.getAttribute("dir")||U.dir,lang:S.getAttribute("lang")||U.lang,textDir:S.getAttribute(Q)||U.textDir};for(var b in S)S[b]&&(R.inherited[b]=S[b])}return R.inherited}var I=[],t=[],D={},H=(k.scope||A._scopeName)+"Type",J="data-"+(k.scope||A._scopeName)+"-",K=J+"type",Q=J+"textdir";J+="mixins";var N=q.firstChild,O=k.inherited;if(!O){O=function b(S,U){return S.getAttribute&&S.getAttribute(U)||S.parentNode&&b(S.parentNode,U)};O={dir:O(q,"dir"),lang:O(q,"lang"),textDir:O(q,Q)};for(var M in O)O[M]||
delete O[M]}M={inherited:O};for(var P,X;;)if(N)if(1!=N.nodeType)N=N.nextSibling;else if(P&&"script"==N.nodeName.toLowerCase())(O=N.getAttribute("type"))&&/^dojo\/\w/i.test(O)&&P.push(N),N=N.nextSibling;else if(X)N=N.nextSibling;else if(O=N.getAttribute(K)||N.getAttribute(H),q=N.firstChild,O||q&&(3!=q.nodeType||q.nextSibling)){X=null;if(O){var Y=N.getAttribute(J);P=Y?[O].concat(Y.split(/\s*,\s*/)):[O];try{X=g(P,k.contextRequire)}catch(R){}X||v.forEach(P,function(R){~R.indexOf("/")&&!D[R]&&(D[R]=!0,
t[t.length]=R)});Y=X&&!X.prototype._noScript?[]:null;M={types:P,ctor:X,parent:M,node:N,scripts:Y};M.inherited=B(M);I.push(M)}else M={node:N,scripts:P,parent:M};P=Y;X=N.stopParser||X&&X.prototype.stopParser&&!k.template;N=q}else N=N.nextSibling;else{if(!M||!M.node)break;N=M.node.nextSibling;X=!1;M=M.parent;P=M.scripts}var V=new x;t.length?(m("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+t.join(", ")),(k.contextRequire||G)(t,function(){V.resolve(v.filter(I,function(R){if(!R.ctor)try{R.ctor=
g(R.types,k.contextRequire)}catch(b){}for(var S=R.parent;S&&!S.types;)S=S.parent;var U=R.ctor&&R.ctor.prototype;R.instantiateChildren=!(U&&U.stopParser&&!k.template);R.instantiate=!S||S.instantiate&&S.instantiateChildren;return R.instantiate}))})):V.resolve(I);return V.promise},_require:function(q,k){q=c("{"+q.innerHTML+"}");var B=[],I=[],t=new x;k=k&&k.contextRequire||G;for(var D in q)B.push(D),I.push(q[D]);k(I,function(){for(var H=0;H<B.length;H++)z.setObject(B[H],arguments[H]);t.resolve(arguments)});
return t.promise},_scanAmd:function(q,k){var B=new x,I=B.promise;B.resolve(!0);var t=this;C("script[type\x3d'dojo/require']",q).forEach(function(D){I=I.then(function(){return t._require(D,k)});D.parentNode.removeChild(D)});return I},parse:function(q,k){!q||"string"==typeof q||"nodeType"in q||(k=q,q=k.rootNode);var B=q?w.byId(q):u.body();k=k||{};var I=k.template?{template:!0}:{},t=[],D=this;q=this._scanAmd(B,k).then(function(){return D.scan(B,k)}).then(function(H){return D._instantiate(H,I,k,!0)}).then(function(H){return t=
t.concat(H)}).otherwise(function(H){console.error("dojo/parser::parse() error",H);throw H;});z.mixin(t,q);return t}};A.parser=r;p.parseOnLoad&&a(100,r,"parse");return r})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(G,A){var z={};G.setObject("dojo.date.stamp",z);z.fromISOString=function(v,p){z._isoRegExp||(z._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var w=z._isoRegExp.exec(v);v=null;
if(w){w.shift();w[1]&&w[1]--;w[6]&&(w[6]*=1E3);p&&(p=new Date(p),A.forEach(A.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(d){return p["get"+d]()}),function(d,h){w[h]=w[h]||d}));v=new Date(w[0]||1970,w[1]||0,w[2]||1,w[3]||0,w[4]||0,w[5]||0,w[6]||0);100>w[0]&&v.setFullYear(w[0]||1970);var u=0,n=w[7]&&w[7].charAt(0);"Z"!=n&&(u=60*(w[8]||0)+(Number(w[9])||0),"-"!=n&&(u*=-1));n&&(u-=v.getTimezoneOffset());u&&v.setTime(v.getTime()+6E4*u)}return v};z.toISOString=function(v,
p){var w=function(h){return 10>h?"0"+h:h};p=p||{};var u=[],n=p.zulu?"getUTC":"get",d="";"time"!=p.selector&&(d=v[n+"FullYear"](),d=["0000".substr((d+"").length)+d,w(v[n+"Month"]()+1),w(v[n+"Date"]())].join("-"));u.push(d);"date"!=p.selector&&(d=[w(v[n+"Hours"]()),w(v[n+"Minutes"]()),w(v[n+"Seconds"]())].join(":"),n=v[n+"Milliseconds"](),p.milliseconds&&(d+="."+(100>n?"0":"")+w(n)),p.zulu?d+="Z":"time"!=p.selector&&(v=v.getTimezoneOffset(),p=Math.abs(v),d+=(0<v?"-":"+")+w(Math.floor(p/60))+":"+w(p%
60)),u.push(d));return u.join("T")};return z})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(G,A,z,v,p,w){return G([w,p],{_onMap:function(u){var n=this.constructor._onMap;n&&n.FINAL||(delete this.constructor._onMap,n=this.registerConnectEvents(),n.FINAL=!0);u=u.toLowerCase();if(n[u])var d=this[n[u].method];else u=this._onCamelCase(u),this[u]&&(d=u);return d},on:function(u,n){var d=this._onMap(u),
h=u.replace(/\-/g,""),e="on"+h in this.domNode;return d||!e?this.inherited(arguments):this.own(v(this.domNode,h,n))[0]},emit:function(u,n,d){var h,e=u.toLowerCase(),x=this.constructor._onMap||this.registerConnectEvents();var m=this[this._onMap(e)];n=n||{};n.target||(n.target=this);if(m&&x&&x[e]){this._onObj2Arr(function(){h=Array.prototype.slice.call(arguments)},x[e].argKeys)(n);var C=A.mixin({},arguments);C[2]=h;C[0]=x[e].name.replace(/^on/,"")}return this.inherited(C||arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(G,A,z,v){return G("dijit.form.ToggleButton",[z,v],{baseClass:"dijitToggleButton",setChecked:function(p){A.deprecated("setChecked("+p+") is deprecated. Use set('checked',"+p+") instead.","","2.0");this.set("checked",p)}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(G,A,z,v,p,w,u,n,d,h){v("dijit-legacy-requires")&&u(0,function(){G(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});u=A("dijit.form.Button"+(v("dojo-bidi")?"_NoBidi":""),[n,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:h,_setValueAttr:"valueNode",_setNameAttr:function(e){this.valueNode&&this.valueNode.setAttribute("name",e)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=w.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(e){this.containerNode&&z.toggle(this.containerNode,"dijitDisplayNone",!e);this._set("showLabel",e)},setLabel:function(e){p.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",e)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=w.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});v("dojo-bidi")&&(u=A("dijit.form.Button",u,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(e){this._created&&this.textDir!=e&&(this._set("textDir",e),this._setLabelAttr(this.label))}}));return u})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(G,A,z,v,p,w,u,n){A("dijit-legacy-requires")&&v(0,function(){require(["dijit/form/_FormValueWidget"])});return G("dijit.form._FormWidget",[p,u,w,n],{setDisabled:function(d){z.deprecated("setDisabled("+d+") is deprecated. Use set('disabled',"+d+") instead.","","2.0");this.set("disabled",d)},setValue:function(d){z.deprecated("dijit.form._FormWidget:setValue("+d+") is deprecated.  Use set('value',"+d+") instead.","","2.0");this.set("value",d)},getValue:function(){z.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!A("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(G,A,z,v,p,w,u,n,d,h){return A("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(e){this._set("disabled",e);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(z.set(this.focusNode,"disabled",e),n("trident")&&"readOnly"in this&&z.set(this.focusNode,"readonly",e||this.readOnly)):this.focusNode.setAttribute("aria-disabled",e?"true":"false");
this.valueNode&&z.set(this.valueNode,"disabled",e);e?(this._set("hovering",!1),this._set("active",!1),e="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",G.forEach(p.isArray(e)?e:[e],function(x){x=this[x];n("webkit")||h.hasDefaultTabStop(x)?x.setAttribute("tabIndex","-1"):x.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(e){if("mouse"==e&&this.isFocusable())var x=this.own(u(this.focusNode,
"focus",function(){C.remove();x.remove()}))[0],m=n("pointer-events")?"pointerup":n("MSPointer")?"MSPointerUp":n("touch-events")?"touchend, mouseup":"mouseup",C=this.own(u(this.ownerDocumentBody,m,p.hitch(this,function(E){C.remove();x.remove();this.focused&&("touchend"==E.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=v.get(this.domNode,
"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(e,x){return"number"==typeof e&&"number"==typeof x?isNaN(e)&&isNaN(x)?0:e-x:e>x?1:e<x?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(e,x){void 0!=this._lastValueReported||null!==x&&this._onChangeActive||(this._resetValue=this._lastValueReported=e);this._pendingOnChange=this._pendingOnChange||typeof e!=typeof this._lastValueReported||0!=this.compare(e,
this._lastValueReported);(this.intermediateChanges||x||void 0===x)&&this._pendingOnChange&&(this._lastValueReported=e,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(e)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},
"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(G,A,z,v){var p=G("dijit.form._ButtonMixin"+(z("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(w){w.stopPropagation();w.preventDefault();this.disabled||this.valueNode.click(w);return!1},_onClick:function(w){if(this.disabled)return w.stopPropagation(),w.preventDefault(),!1;!1===this.onClick(w)&&w.preventDefault();var u=w.defaultPrevented;if(!u&&"submit"==this.type&&
!(this.valueNode||this.focusNode).form)for(var n=this.domNode;n.parentNode;n=n.parentNode){var d=v.byNode(n);if(d&&"function"==typeof d._onSubmit){d._onSubmit(w);w.preventDefault();u=!0;break}}return!u},postCreate:function(){this.inherited(arguments);A.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(w){this._set("label",w);(this.containerNode||this.focusNode).innerHTML=w;this.onLabelSet()},onLabelSet:function(){}});z("dojo-bidi")&&(p=G("dijit.form._ButtonMixin",
p,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return p})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(G,A){return G("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(z){var v=this.checked;this._set("checked",!v);var p=this.inherited(arguments);this.set("checked",p?this.checked:v);return p},_setCheckedAttr:function(z,v){this._set("checked",
z);var p=this.focusNode||this.domNode;this._created&&A.get(p,"checked")!=!!z&&A.set(p,"checked",!!z);p.setAttribute(this._aria_attr,String(z));this._handleOnChange(z,v)},postCreate:function(){this.inherited(arguments);var z=this.focusNode||this.domNode;this.checked&&z.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),
function(G,A,z,v,p,w,u,n,d,h){return G("dijit.form.DropDownButton",[u,n,d],{baseClass:"dijitDropDownButton",templateString:h,_fillContent:function(){var e=this.srcNodeRef,x=this.containerNode;if(e&&x)for(;e.hasChildNodes();){var m=e.firstChild;m.hasAttribute&&(m.hasAttribute("data-dojo-type")||m.hasAttribute("dojoType")||m.hasAttribute("data-"+A._scopeName+"-type")||m.hasAttribute(A._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(m)):
x.appendChild(m)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=p.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&w.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var e=this.dropDown;return!!e&&(!e.href||e.isLoaded)},loadDropDown:function(e){var x=this.dropDown,m=x.on("load",z.hitch(this,function(){m.remove();e()}));x.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},
"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(G,A,z,v,p,w,u,n,d,h,e,x,m,C,E,a){return G("dijit._HasDropDown",a,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,
_onDropDownMouseDown:function(c){this.disabled||this.readOnly||("MSPointerDown"!=c.type&&c.preventDefault(),this.own(e.once(this.ownerDocument,x.release,h.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(c){var f=this.dropDown,g=!1;if(c&&this._opened){var l=w.position(this._buttonNode,!0);if(!(c.pageX>=l.x&&c.pageX<=l.x+l.w&&c.pageY>=l.y&&c.pageY<=l.y+l.h)){for(l=c.target;l&&!g;)p.contains(l,"dijitPopup")?g=!0:l=l.parentNode;if(g){l=c.target;if(f.onItemClick){for(var r;l&&
!(r=m.byNode(l));)l=l.parentNode;if(r&&r.onClick&&r.getParent)r.getParent().onItemClick(r,c)}return}}}this._opened?f.focus&&(!1!==f.autoFocus||"mouseup"==c.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){f.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(c){this._stopClickEvents&&(c.stopPropagation(),c.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||
this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var c={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";p.add(this._arrowWrapperNode||this._buttonNode,"dijit"+c+"ArrowButton")},postCreate:function(){this.inherited(arguments);var c=this.focusNode||this.domNode;this.own(e(this._buttonNode,x.press,h.hitch(this,"_onDropDownMouseDown")),
e(this._buttonNode,"click",h.hitch(this,"_onDropDownClick")),e(c,"keydown",h.hitch(this,"_onKey")),e(c,"keyup",h.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(c){if(!this.disabled&&!this.readOnly){var f=this.dropDown,g=c.target;f&&this._opened&&f.handleKey&&!1===f.handleKey(c)?(c.stopPropagation(),c.preventDefault()):f&&this._opened&&
c.keyCode==d.ESCAPE?(this.closeDropDown(),c.stopPropagation(),c.preventDefault()):!this._opened&&(c.keyCode==d.DOWN_ARROW||(c.keyCode==d.ENTER||c.keyCode==d.SPACE&&(!this._searchTimer||c.ctrlKey||c.altKey||c.metaKey))&&("input"!==(g.tagName||"").toLowerCase()||g.type&&"text"!==g.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,c.stopPropagation(),c.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var c=this.dropDown;c&&c.focus&&this.defer(h.hitch(c,
"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(c){c()},loadAndOpenDropDown:function(){var c=new A,f=h.hitch(this,function(){this.openDropDown();c.resolve(this.dropDown)});this.isLoaded()?f():this.loadDropDown(f);return c},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var c=this.dropDown,f=c.domNode,g=this._aroundNode||
this.domNode,l=this,r=E.open({parent:this,popup:c,around:g,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){l.closeDropDown(!0)},onCancel:function(){l.closeDropDown(!0)},onClose:function(){v.set(l._popupStateNode,"popupActive",!1);p.remove(l._popupStateNode,"dijitHasDropDownOpen");l._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&g.offsetWidth>c._popupWrapper.offsetWidth){g=g.offsetWidth-c._popupWrapper.offsetWidth;var q={w:c.domNode.offsetWidth+g};this._origStyle=
f.style.cssText;h.isFunction(c.resize)?c.resize(q):w.setMarginBox(f,q);"R"==r.corner[1]&&(c._popupWrapper.style.left=c._popupWrapper.style.left.replace("px","")-g+"px")}v.set(this._popupStateNode,"popupActive","true");p.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",c.id);"presentation"===f.getAttribute("role")||f.getAttribute("aria-labelledby")||f.setAttribute("aria-labelledby",
this.id);return r},closeDropDown:function(c){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),c&&this.focus&&this.focus(),E.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(G,A,z,v,p,w,u,n,d,h,e,x,m,C,E,a){return d("dijit.layout.ContentPane",[z,v,p],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:G._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(c,f,g){var l=new g(c,f);return!l.href&&l._contentSetter&&l._contentSetter.parseDeferred&&!l._contentSetter.parseDeferred.isFulfilled()?l._contentSetter.parseDeferred.then(function(){return l}):l},create:function(c,f){if(!(c&&c.template||!f||"href"in c||"content"in c)){f=e.byId(f);for(var g=f.ownerDocument.createDocumentFragment();f.firstChild;)g.appendChild(f.firstChild);
c=A.delegate(c,{content:g})}this.inherited(arguments,[c,f])},postMixInProperties:function(){this.inherited(arguments);var c=E.getLocalization("dijit","loading",this.lang);this.loadingMessage=w.substitute(this.loadingMessage,c);this.errorMessage=w.substitute(this.errorMessage,c)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&n.forEach(this._contentSetter.parseResults,
function(c){c._started||c._destroyed||!A.isFunction(c.startup)||(c.startup(),c._started=!0)},this)},_startChildren:function(){n.forEach(this.getChildren(),function(c){c._started||c._destroyed||!A.isFunction(c.startup)||(c.startup(),c._started=!0)});this._contentSetter&&n.forEach(this._contentSetter.parseResults,function(c){c._started||c._destroyed||!A.isFunction(c.startup)||(c.startup(),c._started=!0)},this)},setHref:function(c){G.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",c)},_setHrefAttr:function(c){this.cancel();this.onLoadDeferred=new h(A.hitch(this,"cancel"));this.onLoadDeferred.then(A.hitch(this,"onLoad"));this._set("href",c);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(c){G.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",c)},_setContentAttr:function(c){this._set("href",
"");this.cancel();this.onLoadDeferred=new h(A.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(A.hitch(this,"onLoad"));this._setContent(c||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(c){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new h(A.hitch(this,"cancel"));this.onLoadDeferred.then(A.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var c=this,f={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
A.isObject(this.ioArgs)&&A.mixin(f,this.ioArgs);var g=this._xhrDfd=(this.ioMethod||C.get)(f),l;g.then(function(r){l=r;try{return c._isDownloaded=!0,c._setContent(r,!1)}catch(q){c._onError("Content",q)}},function(r){g.canceled||c._onError("Download",r);delete c._xhrDfd;return r}).then(function(){c.onDownloadEnd();delete c._xhrDfd;return l});delete this._hrefChanged},_onLoadHandler:function(c){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(c)}catch(f){console.error("Error "+(this.widgetId||
this.id)+" running custom onLoad code: "+f.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(c){console.error("Error "+this.widgetId+" running custom onUnload code: "+c.message)}},destroyDescendants:function(c){this.isLoaded&&this._onUnloadHandler();var f=this._contentSetter;n.forEach(this.getChildren(),function(g){g.destroyRecursive?g.destroyRecursive(c):g.destroy&&g.destroy(c);g._destroyed=!0});f&&(n.forEach(f.parseResults,function(g){g._destroyed||(g.destroyRecursive?
g.destroyRecursive(c):g.destroy&&g.destroy(c),g._destroyed=!0)}),delete f.parseResults);c||m.empty(this.containerNode);delete this._singleChild},_setContent:function(c,f){c=this.preprocessContent(c);this.destroyDescendants();var g=this._contentSetter;g&&g instanceof u._ContentSetter||(g=this._contentSetter=new u._ContentSetter({node:this.containerNode,_onError:A.hitch(this,this._onError),onContentError:A.hitch(this,function(q){q=this.onContentError(q);try{this.containerNode.innerHTML=q}catch(k){console.error("Fatal "+
this.id+" could not change content due to "+k.message,k)}})}));var l=A.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!c.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});l=g.set(A.isObject(c)&&c.domNode?c.domNode:c,l);var r=this;return a(l&&l.then?l:g.parseDeferred,function(){delete r._contentSetterParams;f||(r._started&&(r._startChildren(),r._scheduleLayout()),
r._onLoadHandler(c))})},preprocessContent:function(c){return c},_onError:function(c,f,g){this.onLoadDeferred.reject(f);c=this["on"+c+"Error"].call(this,f);g?console.error(g,f):c&&this._setContent(c,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(G,A,z,v,p,w,u,n,d,h){return A("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var e=this.getParent();this._childOfLayoutWidget=e&&e.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",w.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var e=[],x=!1;u("\x3e *",this.containerNode).some(function(m){var C=
n.byNode(m);C&&C.resize?e.push(C):!/script|link|style/i.test(m.nodeName)&&m.offsetHeight&&(x=!0)});this._singleChild=1!=e.length||x?null:e[0];z.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(e,x){this._resizeCalled=!0;this._scheduleLayout(e,x)},_scheduleLayout:function(e,x){this._isShown()?this._layout(e,x):(this._needLayout=!0,this._changeSize=e,this._resultSize=x)},_layout:function(e,x){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
e&&v.setMarginBox(this.domNode,e);var m=this.containerNode;m===this.domNode?(x=x||{},w.mixin(x,e||{}),"h"in x&&"w"in x||(x=w.mixin(v.getMarginBox(m),x)),this._contentBox=h.marginBox2contentBox(m,x)):this._contentBox=v.getContentBox(m);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var e=this._contentBox||v.getContentBox(this.containerNode);this._singleChild.resize({w:e.w,h:e.h})}else{e=this.getChildren();for(var x,m=0;x=
e[m++];)x.resize&&x.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var e=this.domNode,x=this.domNode.parentNode;return"none"!=e.style.display&&"hidden"!=e.style.visibility&&!z.contains(e,"dijitHidden")&&x&&x.style&&"none"!=x.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(G,A,z,v,p){function w(d){return d.substring(0,1).toUpperCase()+d.substring(1)}function u(d,h){var e=d.resize?d.resize(h):z.setMarginBox(d.domNode,h);e?p.mixin(d,e):(p.mixin(d,z.getMarginBox(d.domNode)),p.mixin(d,h))}var n={marginBox2contentBox:function(d,h){var e=v.getComputedStyle(d),x=z.getMarginExtents(d,e),m=z.getPadBorderExtents(d,e);return{l:v.toPixelValue(d,e.paddingLeft),t:v.toPixelValue(d,e.paddingTop),w:h.w-
(x.w+m.w),h:h.h-(x.h+m.h)}},layoutChildren:function(d,h,e,x,m){h=p.mixin({},h);A.add(d,"dijitLayoutContainer");e=G.filter(e,function(C){return"center"!=C.region&&"client"!=C.layoutAlign}).concat(G.filter(e,function(C){return"center"==C.region||"client"==C.layoutAlign}));G.forEach(e,function(C){var E=C.domNode,a=C.region||C.layoutAlign;if(!a)throw Error("No region setting for "+C.id);var c=E.style;c.left=h.l+"px";c.top=h.t+"px";c.position="absolute";A.add(E,"dijitAlign"+w(a));E={};x&&x==C.id&&(E["top"==
C.region||"bottom"==C.region?"h":"w"]=m);"leading"==a&&(a=C.isLeftToRight()?"left":"right");"trailing"==a&&(a=C.isLeftToRight()?"right":"left");"top"==a||"bottom"==a?(E.w=h.w,u(C,E),h.h-=C.h,"top"==a?h.t+=C.h:c.top=h.t+h.h+"px"):"left"==a||"right"==a?(E.h=h.h,u(C,E),h.w-=C.w,"left"==a?h.l+=C.w:c.left=h.l+h.w+"px"):"client"!=a&&"center"!=a||u(C,h)})}};p.setObject("dijit.layout.utils",n);return n})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(G,A,z,v,p,w,u){var n=0,d={_secureForInnerHtml:function(h){return h.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:w.empty,_setNodeContent:function(h,e){w.empty(h);if(e)if("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=w.toDom(e,h.ownerDocument)),!e.nodeType&&A.isArrayLike(e))for(var x=e.length,m=0;m<e.length;m=x==e.length?m+1:0)w.place(e[m],h,"last");else w.place(e,h,"last");return h},_ContentSetter:v("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:G._scopeName,startup:!0,constructor:function(h,e){A.mixin(this,h||{});e=this.node=p.byId(this.node||e);this.id||(this.id=["Setter",e?e.id||e.tagName:"",n++].join("_"))},set:function(h,e){void 0!==h&&(this.content=h);"number"==typeof h&&(h=h.toString());e&&this._mixin(e);this.onBegin();this.setContent();return(h=this.onEnd())&&h.then?h:this.node},setContent:function(){var h=this.node;if(!h)throw Error(this.declaredClass+
": setContent given no node");try{h=d._setNodeContent(h,this.content)}catch(x){var e=this.onContentError(x);try{h.innerHTML=e}catch(m){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+m.message,m)}}this.node=h},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(z.forEach(this.parseResults,function(h){h.destroy&&h.destroy()}),delete this.parseResults);
w.empty(this.node)},onBegin:function(){var h=this.content;if(A.isString(h)&&(this.cleanContent&&(h=d._secureForInnerHtml(h)),this.extractContent)){var e=h.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);e&&(h=e[1])}this.empty();this.content=h;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(h){return"Error occurred setting content: "+
h},onExecError:function(h){return"Error occurred executing scripts: "+h},_mixin:function(h){var e={},x;for(x in h)x in e||(this[x]=h[x])},_parse:function(){var h=this.node;try{var e={};z.forEach(["dir","lang","textDir"],function(m){this[m]&&(e[m]=this[m])},this);var x=this;this.parseDeferred=u.parse({rootNode:h,noStart:!this.startup,inherited:e,scope:this.parserScope}).then(function(m){return x.parseResults=m},function(m){x._onError("Content",m,"Error parsing in _ContentSetter#"+x.id)})}catch(m){this._onError("Content",
m,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(h,e,x){h=this["on"+h+"Error"].call(this,e);x?console.error(x,e):h&&d._setNodeContent(this.node,h,!0)}}),set:function(h,e,x){void 0==e&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),e="");"number"==typeof e&&(e=e.toString());return x?(new d._ContentSetter(A.mixin(x,{content:e,node:h}))).set():d._setNodeContent(h,e,!0)}};A.setObject("dojo.html",d);return d})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\r\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\r\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\r\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lat}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lon}\x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"*now":function(G){G(['dojo/i18n!*preload*esri/dijit/nls/Measurement*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/dijit/Measurement","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../numberUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),function(G,
A,z,v,p,w,u,n,d,h,e,x,m,C,E,a,c,f,g,l,r,q,k,B,I,t,D,H,J,K,Q,N,O,M,P,X,Y,V,R,S,U){A=A([R,x,Y,V],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:S,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,_defaultFillSymbol:null,
_fillSymbol:null,_borderlessFillSymbol:null,_defaultCustomPointSymbolHeight:25,_defaultCustomPointSymbolWidth:25,_userGeometry:null,_currentGeometry:null,_inputPoints:[],_unitDictionary:[],_densificationRatio:.07848050723825097,numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],_distanceUnitStrings:[],
_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,_NLS_Lon:null,_mouseMoveMapHandler:null,_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,_eventMap:{"measure-start":["toolName",
"unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName","geometry","values","unitName"],"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(b,y){if(b&&b.map){this._map=b.map;if(this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var F=p.connect(this._map,"onLoad",this,function(){p.disconnect(F);
F=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs)});this._geometryService=K.defaults.geometryService;this._mouseImgURL=G.toUrl("./images/cursor16x24.png");this._defaultPinURL=G.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new c(c.STYLE_SOLID,new w([0,128,255]),3);this._defaultFillSymbol=new f(c.STYLE_SOLID,this._defaultLineSymbol,new w([0,0,0,.5]));b.pointSymbol?(this._pointSymbol=b.pointSymbol,
this._useDefaultPointSymbol=!1):(this._pointSymbol=new a(this._defaultPinURL,16,26),this._pointSymbol.setOffset(0,12));this._fillSymbol=y=b.fillSymbol||this._defaultFillSymbol;this._areaLineSymbol=y.outline||this._defaultLineSymbol;this._borderlessFillSymbol=g.fromJson(y.toJson());this._borderlessFillSymbol.setOutline(null);this._lineSymbol=b.lineSymbol?b.lineSymbol:this._defaultLineSymbol;this._defaultDistanceUnit=b.defaultLengthUnit?b.defaultLengthUnit:M.MILES;this._defaultAreaUnit=b.defaultAreaUnit?
b.defaultAreaUnit:M.ACRES;this._defaultLocationUnit=b.defaultLocationUnit?b.defaultLocationUnit:M.DECIMAL_DEGREES;this._snappingCallback=z.hitch(this,this._snappingCallback);b.geometry&&(this._userGeometry=b.geometry);this._calcTimer=null;this.advancedLocationUnits=b.advancedLocationUnits||!1;this._NLS_Lon=U.widgets.measurement.NLS_longitude;this._NLS_Lat=U.widgets.measurement.NLS_latitude;this._gsErrorMsg=U.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=U.widgets.measurement.NLS_calculating;
this._geometryServiceLength=u(this._geometryServiceLength,250)}else console.log("Unable to find the required 'map' property in widget parameters")},startup:function(){this._setupDictionaries();h.create("img",{src:this._mouseImgURL,style:"vertical-align: middle"},this.mouseCell);this._useDefaultPointSymbol?h.create("img",{src:this._defaultPinURL,style:"vertical-align: middle"},this.pinCell):this._drawPointGraphics(this.pinCell);if(this._userGeometry)if(this._map.loaded)this._measureCustomGeometry(this._userGeometry),
this._userGeometry=null;else var b=p.connect(this._map,"onLoad",this,function(){p.disconnect(b);b=null;this._measureCustomGeometry(this._userGeometry);this._userGeometry=null})},destroy:function(){this._resetToolState();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(b,y){this.previousTool=this.activeTool||null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),
this._polygonGraphic=null);var F=m.byNode(this._buttonDijits[b].domNode).checked;d.set(this._unitDropDown.domNode,"visibility","visible");m.byNode(this._buttonDijits.area.domNode).set("checked",!1);m.byNode(this._buttonDijits.distance.domNode).set("checked",!1);m.byNode(this._buttonDijits.location.domNode).set("checked",!1);if(!0===y||!1===y)F=y;m.byNode(this._buttonDijits[b].domNode).set("checked",F);this._toggleLocationResultsTable(!1,!0);F?(this.activeTool=b,(this._dblClickZoom=this._map.isDoubleClickZoom)&&
this._map.disableDoubleClickZoom(),"area"===b?this._setupAreaTool():"distance"===b?this._setupDistanceTool():"location"===b&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),this._map.snappingManager._setUpSnapping())):(this.activeTool=null,d.set(this._unitDropDown.domNode,"visibility","hidden"));if(this.activeTool!==this.previousTool)this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(b){b&&this._measureCustomGeometry(b)},
clearResult:function(){var b=this._map,y;this.result=0;this.resultValue.setContent("\x26nbsp");for(y=0;y<this._measureGraphics.length;y++)b.graphics.remove(this._measureGraphics[y]);this._measureGraphic=this._locationGraphic=this._currentGeometry=null;this._measureGraphics=[];b.graphics.remove(this._tempGraphic);p.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null},show:function(){Q.show(this.domNode)},hide:function(){Q.hide(this.domNode)},showTool:function(b){d.set(this._buttonDijits[b].domNode,
"display","inline-block")},hideTool:function(b){d.set(this._buttonDijits[b].domNode,"display","none")},getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),
this._mapExtentChangeHandler=p.connect(this._map,"onExtentChange",z.hitch(this,this._projectMapExtent)));this._clickMapHandler=p.connect(this._map,"onClick",this,"_locationClickHandler");if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=p.connect(this._map,"onMouseMove",this,"_locationMoveHandler")},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(b){this.setTool("location",
!0);"Web Mercator"===this._map.cs&&b.spatialReference!==this._map.spatialReference&&(b=r.geographicToWebMercator(b));this._measureGraphic=new I;this._measureGraphic.setSymbol(this._pointSymbol);this._measureGraphic.setGeometry(b);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._currentGeometry=b;this._calculateLocation(b,!0)},_calculateLocation:function(b,y){var F=!("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit);
F&&this._mouseMoveMapHandler&&(p.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);b=z.clone(b);if(y){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&4326!==this.map.spatialReference.wkid){this._projectLocation(b,F);return}this._updateMarkerLocation(b.x,b.y)}b=this._getGCSLocation(b);this._advancedLocationDisplayHandler(b,F,y)},_projectLocation:function(b,y){this._geometryService.project([b],new X({wkid:4326}),z.hitch(this,function(F){this._advancedLocationDisplayHandler(F[0],
y,!0)}),z.hitch(this,function(F){console.log(this._gsErrorMsg,F)}))},_advancedLocationDisplayHandler:function(b,y,F){y?this._updateGeocoordinateStringLocation({coordinates:[[b.x,b.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},b):(y=this._calculateXY(b.x,b.y),F?(this._updateClickLocation(y[0],y[1]),this.onMeasureEnd(this.activeTool,b,[y[0],y[1]],this.getUnit())):this._updateMouseLocation(y[0],y[1]))},_updateMarkerLocation:function(b,y){this.markerLocationX=b;this.markerLocationY=
y},_updateMouseLocation:function(b,y){this.mouseLongitude.innerHTML=b;this.mouseLatitude.innerHTML=y},_updateClickLocation:function(b,y){this._updateMouseLocation(b,y);this.markerLongitude.innerHTML=b;this.markerLatitude.innerHTML=y},_updateGeocoordinateStringLocation:function(b,y){this.resultValue.setContent("\x26nbsp");this._geometryService.toGeoCoordinateString(b,z.hitch(this,function(F){clearTimeout(this._calcTimer);F?(this.resultValue.setContent(F[0]),this.onMeasureEnd(this.activeTool,y,F,this.getUnit())):
(this.resultValue.setContent(this._gsErrorMsg),this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=setTimeout(z.hitch(this,function(){this.resultValue.setContent(this._calculatingMsg)},1E3))},_switchLocationUnit:function(b){m.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[b]);this.currentLocationUnit=b;p.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;this.onUnitChange(this._unitStrings[b],this.activeTool);
if("esriDegreeMinuteSeconds"===b||"esriDecimalDegrees"===b)this._mouseMoveMapHandler=p.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0);else if(this._toggleLocationResultsTable(!1,!1),null!==this.resultValue&&(null!==this.markerLocationX||null!==this.markerLocationY)&&this._locationGraphic){var y=this._getGCSLocation(this._locationGraphic.geometry);this._updateGeocoordinateStringLocation({coordinates:[[y.x,
y.y]],sr:{wkid:4326},conversionType:this._unitStrings[b]},this._locationGraphic.geometry)}},_toggleLocationResultsTable:function(b,y){y&&(this.resultValue.setContent("\x26nbsp"),this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML="---");b?(Q.show(this.resultTable.domNode),Q.hide(this.resultValueContainer.domNode)):(Q.hide(this.resultTable.domNode),Q.show(this.resultValueContainer.domNode),p.disconnect(this._mouseMoveMapHandler));
"PCS"===this._map.cs&&Q.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=p.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=[];this._createDistanceUnitList();this._mouseClickMapHandler=p.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=p.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},
_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(b){if(1<b.paths[0].length){this.setTool("distance",!0);this._inputPoints=[];v.forEach(b.paths[0],z.hitch(this,function(F,L){this._inputPoints.push(F);var T=new I(new q(F[0],F[1],b.spatialReference),this._pointSymbol);this._measureGraphics.push(T);this._map.graphics.add(T);0!==L&&(this.result+=this._geodesicDistance(F,b.paths[0][L-1]))}));this._measureGraphic=new I;this._measureGraphic.setSymbol(this._lineSymbol);
this._measureGraphics.push(this._measureGraphic);var y=this._densifyGeometry(b);this._measureGraphic.setGeometry(y);this._map.graphics.add(this._measureGraphic);this._inputPoints=[];y=this._outputResult(this.result,this.getUnit());this._currentGeometry=b;this.onMeasureEnd(this.activeTool,b,y,this.getUnit())}},_showDistance:function(b){b&&this._outputResult(b,m.byNode(this._unitDropDown.domNode).label)},_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];
this._createAreaUnitList();this._tempGraphic=new I;this._tempGraphic._isSnapTarget=!1;this._tempGraphic.setSymbol(this._areaLineSymbol);this._tempGraphic.setGeometry(new k(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=p.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=p.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this._doubleClickMapHandler=p.connect(this._map,
"onDblClick",this,"_measureAreaDblClickHandler")},_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var b=[];v.forEach(this._polylineGraphics,z.hitch(this,function(L){v.forEach(L.geometry.paths,z.hitch(this,function(T){v.forEach(T,z.hitch(this,function(W){b.push(W)}))}))}));b.push(b[0]);var y=new B(this._map.spatialReference);y.addRing(b);y=this._densifyGeometry(y);var F=new I;F.setGeometry(y);F.setSymbol(this._borderlessFillSymbol);this._measureGraphic=
F;this._measureGraphics.push(F);return F},_getArea:function(b){var y=[],F=new t;F.areaUnit=H.UNIT_SQUARE_METERS;F.calculationType="geodesic";B.prototype.isSelfIntersecting(b)?this._geometryService.simplify([b],z.hitch(this,function(L){v.forEach(L,z.hitch(this,function(W){"PCS"===this._map.cs?(F.polygons=L,this._geometryService.areasAndLengths(F)):("Web Mercator"===this._map.cs&&(W=r.webMercatorToGeographic(W)),y.push(W))}));var T=l.geodesicAreas(y,M.SQUARE_METERS);this._showArea(T[0])})):("Web Mercator"===
this._map.cs&&(b=r.webMercatorToGeographic(b)),y.push(b),"PCS"===this._map.cs?(F.polygons=y,this._geometryService.areasAndLengths(F)):(b=l.geodesicAreas(y,M.SQUARE_METERS),this._showArea(Math.abs(b[0]))))},_outputArea:function(b){this._showArea(Math.abs(b.areas[0]))},_showArea:function(b){if(b)if(this.result=b,b=m.byNode(this._unitDropDown.domNode).label,b=this._outputResult(this.result,b),this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._currentGeometry,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,
this._currentGeometry,b,this.getUnit())},_measureCustomArea:function(b){this.setTool("area",!0);this._inputPoints=[];var y=this._densifyGeometry(b);this._currentGeometry=b;this._measureGraphic=new I;this._measureGraphic.setGeometry(y);this._measureGraphic.setSymbol(this._fillSymbol);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._getArea(b);this._inputPoints=[]},_resetToolState:function(){var b=this._map;b.navigationManager.setImmediateClick(!1);
this._dblClickZoom&&b.enableDoubleClickZoom();this._inputPoints=[];p.disconnect(this._mouseClickMapHandler);p.disconnect(this._mouseMoveMapHandler);p.disconnect(this._doubleClickMapHandler);p.disconnect(this._mouseDragMapHandler);p.disconnect(this._clickMapHandler);p.disconnect(this._mapExtentChangeHandler);p.disconnect(this._geometryAreaHandler);this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=
this._geometryAreaHandler=null;b.snappingManager&&b.snappingManager._snappingGraphic&&b.graphics.remove(b.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},_measureCustomGeometry:function(b){this.clearResult();switch(b.type){case "point":this._measureCustomPoint(b);break;case "polyline":this._measureCustomDistance(b);break;case "polygon":this._measureCustomArea(b)}},
_densifyGeometry:function(b){var y=this._map.cs,F=l.getSpheroidInfo(b.spatialReference).radius*this._densificationRatio;"Web Mercator"===y?(b=r.webMercatorToGeographic(b),F=l.geodesicDensify(b,F),F=r.geographicToWebMercator(F)):F="PCS"===y?b:l.geodesicDensify(b,F);return F},_geodesicDistance:function(b,y){var F=new k(this._map.spatialReference);"PCS"===this._map.cs&&(b=this._getGCSLocation(b),y=this._getGCSLocation(y));F.addPath([b,y]);"Web Mercator"===this._map.cs&&(F=r.webMercatorToGeographic(F));
return l.geodesicLengths([F],M.METERS)[0]},_calculateXY:function(b,y){var F=U.widgets.measurement,L=this._map.getScale();if(this.getUnit()===F.NLS_decimal_degrees){var T=500<=L?6:500>L&&50<=L?7:50>L&&5<=L?8:9;var W=b.toFixed(T);this._map.spatialReference._isWrappable()||(W=this._roundX(W));W=N.format(W);T=N.format(this._roundY(y.toFixed(T)))}else if(this.getUnit()===F.NLS_deg_min_sec){var Z=F=!1;T=9E4<=L?0:9E4>L&&9E3<=L?1:9E3>L&&900<=L?2:900>L&&90<L?3:4;0>b&&(F=!0,b=Math.abs(b));0>y&&(Z=!0,y=Math.abs(y));
y=this._roundY(y);this._map.spatialReference._isWrappable()||(b=this._roundX(b));var aa=Math.floor(y)+"\u00b0";W=Math.floor(b)+"\u00b0";var ba=Math.floor(this._getDegreeMinutes(y))+"'";L=Math.floor(this._getDegreeMinutes(b))+"'";y=N.format(this._getDegreeSeconds(y).toFixed(T))+'"';b=N.format(this._getDegreeSeconds(b).toFixed(T))+'"';T=aa+ba+y;W=W+L+b;F&&(W="-"+W);Z&&(T="-"+T)}return[W,T]},_getDegreeMinutes:function(b){return 60*(b-Math.floor(b))},_getDegreeSeconds:function(b){return 60*(60*(b-Math.floor(b))-
Math.floor(60*(b-Math.floor(b))))},_roundY:function(b){90<b?b=90:-90>b&&(b=-90);return b},_roundX:function(b){180<b?b=180:-180>b&&(b=-180);return b},_getGCSLocation:function(b){b=z.clone(b);var y=this._map,F=y.extent,L=y._newExtent;"Web Mercator"===y.cs?b=r.webMercatorToGeographic(b):"PCS"===y.cs?L&&(b=new q((b.x-F.xmin)*Math.abs((L.xmax-L.xmin)/(F.xmax-F.xmin))+L.xmin,(b.y-F.ymin)*Math.abs((L.ymax-L.ymin)/(F.ymax-F.ymin))+L.ymin,y.spatialReference)):b=b.normalize();return b},_projectMapExtent:function(b){b=
new I(b);var y=new X({wkid:4326});this._geometryService.project([b.geometry],y,z.hitch(this,function(F){if(!this._mouseMoveMapHandler&&"location"===this.activeTool){if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=p.connect(this._map,"onMouseMove",z.hitch(this,this._locationMoveHandler));this._mouseMoveMapHandler=p.connect(this._map,"onMouseMove",z.hitch(this,this._locationMoveHandler))}this._map._newExtent=F[0]}))},
_checkCS:function(b){if(b.wkid)return 3857===b.wkid||102100===b.wkid||102113===b.wkid?"Web Mercator":O.isDefined(P[b.wkid])?"PCS":"GCS";if(b.wkt)return-1!==b.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===b.wkt.indexOf("PROJCS")?"PCS":"GCS"},_switchUnit:function(b){"distance"===this.activeTool?this.currentDistanceUnit=b:"area"===this.activeTool?this.currentAreaUnit=b:"location"===this.activeTool&&(this.currentLocationUnit=b);m.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[b]);
if(null!==this.result){var y=this._outputResult(this.result,this._unitStrings[b]);this.onUnitChange(this._unitStrings[b],this.activeTool);if(null!==this._currentGeometry||null!==this._measureGraphic)if(b=this._currentGeometry||this._measureGraphic.geometry,this._mouseMoveMapHandler)this.onMeasure(this.activeTool,b,y,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,b,y,this.getUnit())}},_setupDictionaries:function(){var b=U.widgets.measurement;this._unitDictionary[b.NLS_length_meters]=1;
this._unitDictionary[b.NLS_length_kilometers]=1E3;this._unitDictionary[b.NLS_length_feet]=.3048;this._unitDictionary[b.NLS_length_miles]=1609.344;this._unitDictionary[b.NLS_length_yards]=.9144;this._unitDictionary[b.NLS_length_nautical_miles]=1852;this._unitDictionary[b.NLS_length_miles_us]=1609.347218694438;this._unitDictionary[b.NLS_length_feet_us]=.3048006096012192;this._unitDictionary[b.NLS_length_yards_us]=.9144018288036576;this._unitDictionary[b.NLS_area_sq_meters]=1;this._unitDictionary[b.NLS_area_sq_kilometers]=
1E6;this._unitDictionary[b.NLS_area_sq_feet]=.09290304;this._unitDictionary[b.NLS_area_acres]=4046.8564224;this._unitDictionary[b.NLS_area_sq_miles]=2589988.110336;this._unitDictionary[b.NLS_area_hectares]=1E4;this._unitDictionary[b.NLS_area_sq_yards]=.83612736;this._unitDictionary[b.NLS_area_acres_us]=4046.872609874252;this._unitDictionary[b.NLS_area_sq_miles_us]=2589998.470319522;this._unitDictionary[b.NLS_area_sq_feet_us]=.09290341161327487;this._unitDictionary[b.NLS_area_sq_yards_us]=.8361307045194736;
this._unitStrings={esriMiles:b.NLS_length_miles,esriKilometers:b.NLS_length_kilometers,esriFeet:b.NLS_length_feet,esriFeetUS:b.NLS_length_feet_us,esriMeters:b.NLS_length_meters,esriYards:b.NLS_length_yards,esriNauticalMiles:b.NLS_length_nautical_miles,esriMilesUS:b.NLS_length_miles_us,esriYardsUS:b.NLS_length_yards_us,esriAcres:b.NLS_area_acres,esriSquareMiles:b.NLS_area_sq_miles,esriSquareKilometers:b.NLS_area_sq_kilometers,esriHectares:b.NLS_area_hectares,esriSquareYards:b.NLS_area_sq_yards,esriSquareFeet:b.NLS_area_sq_feet,
esriSquareFeetUS:b.NLS_area_sq_feet_us,esriSquareMeters:b.NLS_area_sq_meters,esriAcresUS:b.NLS_area_acres_us,esriSquareMilesUS:b.NLS_area_sq_miles_us,esriSquareYardsUS:b.NLS_area_sq_yards_us,esriDecimalDegrees:b.NLS_decimal_degrees,esriDegreeMinuteSeconds:b.NLS_deg_min_sec,esriMGRS:b.NLS_MGRS,esriUSNG:b.NLS_USNG,esriUTM:b.NLS_UTM,esriGARS:b.NLS_GARS,esriGeoRef:b.NLS_GeoRef,esriDDM:b.NLS_DDM,esriDD:b.NLS_DD};this._locationUnitStrings=[b.NLS_decimal_degrees,b.NLS_deg_min_sec,b.NLS_MGRS,b.NLS_USNG,b.NLS_UTM,
b.NLS_GeoRef,b.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[b.NLS_length_miles,b.NLS_length_kilometers,b.NLS_length_feet,b.NLS_length_feet_us,b.NLS_length_meters,b.NLS_length_yards,b.NLS_length_nautical_miles];this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriFeetUS esriMeters esriYards esriNauticalMiles".split(" ");this._areaUnitStrings=[b.NLS_area_acres,
b.NLS_area_sq_miles,b.NLS_area_sq_kilometers,b.NLS_area_hectares,b.NLS_area_sq_yards,b.NLS_area_sq_feet,b.NLS_area_sq_feet_us,b.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareFeetUS esriSquareMeters".split(" ");this._buttonDijits={area:this._areaButton,distance:this._distanceButton,location:this._locationButton};m.byNode(this._distanceButton.domNode).setLabel(b.NLS_distance);m.byNode(this._areaButton.domNode).setLabel(b.NLS_area);
m.byNode(this._locationButton.domNode).setLabel(b.NLS_location);m.byNode(this.resultLabel.domNode).setContent(b.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(b){if(this._map.snappingManager)var y=this._map.snappingManager._snappingPoint;y=y||b.mapPoint;this._inputPoints.push(y);this._currentStartPt=y;if(1===this._inputPoints.length){this._tempGraphic.setGeometry(new k(this._map.spatialReference));
for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,U.widgets.measurement.NLS_area_sq_meters);this._mouseMoveMapHandler=p.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._measureGraphic=new I;this._measureGraphic.setSymbol(this._areaLineSymbol);this._measureGraphics.push(this._measureGraphic);if(1<this._inputPoints.length){b=
new k(this._map.spatialReference);b.addPath([this._inputPoints[this._inputPoints.length-2],y]);var F=new k(this._map.spatialReference);F.addPath([this._inputPoints[0],y]);y=this._densifyGeometry(b);F=this._densifyGeometry(F);this._tempGraphic.setGeometry(F);this._measureGraphic.setGeometry(y);this._map.graphics.add(this._measureGraphic);y=new I;y.setGeometry(b);this._polylineGraphics.push(y);if(2<this._inputPoints.length){y=new B(this._map.spatialReference);F=[];for(b=0;b<this._inputPoints.length;b++)F.push([this._inputPoints[b].x,
this._inputPoints[b].y]);F.push([this._inputPoints[0].x,this._inputPoints[0].y]);y.addRing(F);this._currentGeometry=y;this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));
this._getArea(y)}}else this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(b){if(0<this._inputPoints.length){var y=new k(this._map.spatialReference);if(this._map.snappingManager)var F=this._map.snappingManager._snappingPoint;var L=F||b.mapPoint;y.addPath([this._currentStartPt,L]);b=this._densifyGeometry(y);this._tempGraphic.setGeometry(b)}1<this._inputPoints.length&&(b=new k(this._map.spatialReference),b.addPath([L,
this._inputPoints[0]]),L=this._densifyGeometry(b),this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(L.paths[0])))},_measureAreaDblClickHandler:function(b){p.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&n("ios")&&this._measureAreaMouseClickHandler(b);b=new B(this._map.spatialReference);var y=[],F;for(F=0;F<this._inputPoints.length;F++)y.push([this._inputPoints[F].x,this._inputPoints[F].y]);y.push([this._inputPoints[0].x,
this._inputPoints[0].y]);b.addRing(y);this._inputPoints=[];this._currentGeometry=b;this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(b);this._polylineGraphics=[]},_measureDistanceMouseClickHandler:function(b){if(this._map.snappingManager)var y=this._map.snappingManager._snappingPoint;b=y||b.mapPoint;this._inputPoints.push(b);
this._currentStartPt=b;if(1===this._inputPoints.length){for(y=0;y<this._measureGraphics.length;y++)this._map.graphics.remove(this._measureGraphics[y]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,U.widgets.measurement.NLS_length_meters);this._tempGraphic=new I;this._tempGraphic._isSnapTarget=!1;this._tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=p.connect(this._map,"onMouseMove",
this,"_measureDistanceMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._tempGraphic.setGeometry(new k(this._map.spatialReference));y=new I;y.setSymbol(this._pointSymbol);y.setGeometry(b);this._measureGraphics.push(y);this._map.graphics.add(y);if(1<this._inputPoints.length){this._measureGraphic=new I;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);y=new k(this._map.spatialReference);y.addPath([this._inputPoints[this._inputPoints.length-
2],b]);var F=this._densifyGeometry(y);this._measureGraphic.setGeometry(F);this._map.graphics.add(this._measureGraphic);"PCS"===this._map.cs?this._geometryServiceLength(y,!1):(F=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],b),y=this._outputResult(F,this.getUnit()),this.result+=F,this._showDistance(this.result),F=this._outputResult(this.result,this.getUnit()),this.onMeasure(this.activeTool,b,F,this.getUnit(),y))}else y.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(b){if(0<
this._inputPoints.length){var y=new k(this._map.spatialReference);if(this._map.snappingManager)var F=this._map.snappingManager._snappingPoint;b=F||b.mapPoint;y.addPath([this._currentStartPt,b]);y=this._densifyGeometry(y);this._tempGraphic.setGeometry(y);"PCS"!==this._map.cs&&(F=this._geodesicDistance(this._currentStartPt,b),y=this._outputResult(F,this.getUnit()),F+=this.result,this._showDistance(F),F=this._outputResult(F,this.getUnit()),this.onMeasure(this.activeTool,b,F,this.getUnit(),y))}},_measureDistanceDblClickHandler:function(b){p.disconnect(this._mouseMoveMapHandler);
this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&n("ios")&&this._measureDistanceMouseClickHandler(b);b=new k(this._map.spatialReference);b.addPath(this._inputPoints);this._currentGeometry=b;var y=this._densifyGeometry(b);this._measureGraphic.geometry=y;"PCS"===this._map.cs?this._geometryServiceLength(b,!0):(this._inputPoints=[],this.onMeasureEnd(this.activeTool,b,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(b,y){var F=
new D;F.polylines=[b];F.lengthUnit=9001;F.calculationType="geodesic";this._geometryService.lengths(F,z.hitch(this,function(L){L=L.lengths[0];if(y)this.result=L,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,b,this._outputResult(this.result,this.getUnit()),this.getUnit());else{var T=this._outputResult(L,this.getUnit());this.result+=L;this._showDistance(this.result);this.onMeasure(this.activeTool,b,this._outputResult(this.result,this.getUnit()),this.getUnit(),
T)}}))},_locationClickHandler:function(b){if(this._map.snappingManager)var y=this._map.snappingManager._snappingPoint;b=y||b.mapPoint;this._locationButtonToggle();this._locationGraphic=new I;this._locationGraphic.setGeometry(b);this._locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);this._calculateLocation(b,!0)},_locationMoveHandler:function(b){if(this._map.snappingManager)var y=this._map.snappingManager._snappingPoint;
this._calculateLocation(y||b.mapPoint,!1)},_outputResult:function(b,y){b/=this._unitDictionary[y];0===b?this.resultValue.setContent("\x26nbsp"):1E6<b?this.resultValue.setContent(N.format(b.toPrecision(9),{pattern:this.numberPattern})+" "+y):10>b?this.resultValue.setContent(N.format(b.toFixed(2),{pattern:this.numberPattern+"0"})+" "+y):this.resultValue.setContent(N.format(b.toFixed(2),{pattern:this.numberPattern})+" "+y);return b},_createDistanceUnitList:function(){var b=new C({style:"display: none;"});
v.forEach(this._distanceUnitStrings,z.hitch(this,function(F,L){F=new E({label:F,onClick:z.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[L])})});F.set("class","unitDropDown");b.addChild(F)}));m.byNode(this._unitDropDown.domNode).set("dropDown",b);if(this.currentDistanceUnit){var y=this._unitStrings[this.currentDistanceUnit];m.byNode(this._unitDropDown.domNode).set("label",y)}else y=this._unitStrings[this._defaultDistanceUnit],m.byNode(this._unitDropDown.domNode).set("label",
y),this.currentDistanceUnit=this._defaultDistanceUnit},_createAreaUnitList:function(){var b=new C({style:"display: none;"});v.forEach(this._areaUnitStrings,z.hitch(this,function(F,L){F=new E({label:F,onClick:z.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[L])})});F.set("class","unitDropDown");b.addChild(F)}));m.byNode(this._unitDropDown.domNode).set("dropDown",b);if(this.currentAreaUnit){var y=this._unitStrings[this.currentAreaUnit];m.byNode(this._unitDropDown.domNode).set("label",
y)}else y=this._unitStrings[this._defaultAreaUnit],m.byNode(this._unitDropDown.domNode).set("label",y),this.currentAreaUnit=this._defaultAreaUnit},_createLocationUnitList:function(){var b=this._locationUnitStrings;var y=new C({style:"display: none;"});if(null===this._geometryService||!1===this.advancedLocationUnits)b=b.slice(0,2);v.forEach(b,z.hitch(this,function(F,L){F=new E({label:F,onClick:z.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[L])})});F.set("class","unitDropDown");
y.addChild(F)}));m.byNode(this._unitDropDown.domNode).set("dropDown",y);this.currentLocationUnit||(this.currentLocationUnit=this._defaultLocationUnit);b=this._unitStrings[this.currentLocationUnit];m.byNode(this._unitDropDown.domNode).set("label",b);"esriDegreeMinuteSeconds"!==this.currentLocationUnit&&"esriDecimalDegrees"!==this.currentLocationUnit||this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(b){var y=this._pointSymbol,F=this._defaultCustomPointSymbolWidth,L=this._defaultCustomPointSymbolHeight;
b=h.create("div",{"class":"esriLocationResultSymbol"},b);b=e.createSurface(b,F,L);if(9>n("ie")){var T=b.getEventSource();d.set(T,"position","relative");d.set(T.parentNode,"position","relative")}y=y.getShapeDescriptors();try{var W=b.createShape(y.defaultShape).setFill(y.fill).setStroke(y.stroke)}catch(ba){b.clear();b.destroy();return}var Z=W.getBoundingBox();y=Z.width;T=Z.height;var aa=-(Z.x+y/2);Z=-(Z.y+T/2);b=b.getDimensions();b={dx:aa+b.width/2,dy:Z+b.height/2};if(y>F||T>L)aa=y/F>T/L,F=((aa?F:L)-
5)/(aa?y:T),z.mixin(b,{xx:F,yy:F});W.applyTransform(b)}});n("extend-esri")&&z.setObject("dijit.Measurement",A,J);return A});